{"version":3,"sources":["OverviewHauls.js"],"names":["modules","installedModules","__webpack_require__","moduleId","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","DebugEvents","PHASE_COMPLETION_READY","PHASE_COMPLETION_NOT_READY","PHASE_CHANGED","QUESTION_ANSWERED","QUESTION_NOT_ANSWERED","OPTION_VALUE_CHANGED","BUG_REPORT_SUCCEEDED","BUG_REPORT_FAILED","USER_REJECTED","Phase","[object Object]","phaseName","this","followsUpOn","autoComplete","thingToFollowUpOn","auto","Error","PhaseTypes","ATTEMPT","QUESTION","REPORT","ProcessFactory","_src_Models_Debug_DebugProcess_js__WEBPACK_IMPORTED_MODULE_0__","_src_Models_Debug_Build_PhaseFactory_js__WEBPACK_IMPORTED_MODULE_1__","_src_Models_Debug_BugReporter_js__WEBPACK_IMPORTED_MODULE_2__","_src_Models_Debug_PhaseReport_js__WEBPACK_IMPORTED_MODULE_3__","lazyEvalUsingParent","parentPhase","str","parentResult","result","eval","actions","phaseFactory","cfg","finishWithReport","process","phaseCfg","phases","enqueuePhase","createPhase","bugReporter","lazyEval","phase","addFollowUpPhasesForSuccess","addFollowUpPhasesForAnswers","type","success","subPhase","addSuccessFollowUp","q","questionCfg","entries","questions","optionCfg","options","followUp","option","addFollowUp","DebugProcess","_src_Models_Debug_DebugEvents_js__WEBPACK_IMPORTED_MODULE_0__","processName","currentPhaseIndex","push","watchPhase","splice","events","$","on","join","e","trigger","goToNextPhase","thing","getCurrentPhase","getThingsToFollowUpOn","followUpPhases","insertPhase","hasNextPhase","checkCompletionReady","start","length","slice","map","getSummary","PhaseReport","_src_Models_Debug_Phase_js__WEBPACK_IMPORTED_MODULE_0__","_src_Models_Debug_DebugEvents_js__WEBPACK_IMPORTED_MODULE_1__","_src_Models_Debug_PhaseTypes_js__WEBPACK_IMPORTED_MODULE_2__","Status","SUCCESS","FAIL","NOT_ATTEMPTED","super","status","error","report","buildReport","submitReport","then","url","html_url","catch","finally","PhaseAttempt_PhaseAttempt","asyncFunctionToAttempt","instructions","attempt","async","fail","_error","_result","summarizeData","ctrl","successFollowUpPhases","abortableAttempt","err","console","warn","Promise","resolve","reject","func","cb","setFollowsUpOn","doAttempt","data","summarizeError","message","extra","stack","phaseNum","functionToAttempt","PhaseQuestion_PhaseQuestion","_examinedHtml","html","examinedHtml","question","isAnswered","reduce","acc","concat","QuestionTypes","VALUE","FREE_FORM","SELECT","Question_Question","text","selectedOptionIndex","index","getSelectedOption","answer","QuestionSelect_QuestionSelect","Option_Option","humanText","className","QuestionFreeForm_QuestionFreeForm","questionText","placeholderText","minResponseLength","setSelectedOption","watchSelectedOption","Correctness","CORRECT","INCORRECT","NOT_SURE","OPTION_INCORRECT","QuestionValue_QuestionValue","valueQuestioned","_valueQuestioned","assign","valueChecked","QuestionFactory_QuestionFactory","createQuestionFreeForm","createQuestionSelect","createQuestionValue","ask","addOption","valueExamined","examine","PhaseFactory_PhaseFactory","questionFactory","createPhaseAttempt","createPhaseQuestion","createPhaseReport","action","internalName","execute","summarizeResult","setDataSummarizer","setInstructions","lookAt","addQuestion","DataCollector","debugProcess","censoredProps","Set","scrub","buildData","nav","window","navigator","getSummarySoFar","contentHtml","document","getElementById","outerHTML","appCodeName","app","appName","appVersion","platfrom","userAgent","languages","extend","oscpu","gameData","game_data","keys","has","censorCsrfInString","replace","API","bugReport","BugReporter_BugReporter","title","dataCollected","getCollectibleData","majorVersion","world","player","TwCheese","version","JSON","stringify","createIssue","response","fetch","method","body","ok","statusText","json","AbstractWidget","el","_beforeInsert","before","$el","after","append","afterInsert","callback","observer","MutationObserver","mutations","outerloop","mutation","node","addedNodes","contains","setTimeout","disconnect","observe","attributes","childList","subtree","afterDOMInsert","game","image_base","ImageSrc_self","ROOT","ImageSrc","plus","minus","wood","stone","iron","attack","haulPartial","haulFull","info","attackSentViaFa","attackSizeSmall","attackSizeMedium","attackSizeLarge","attackContainsSnob","attackContainsSpy","attackContainsKnight","popupBackground","popupBorder","servant","loadingSpinner","calendar","sidebarMain","sidebarBug","sidebarGithub","jq","blue","black","darkGrey","grey","red","legacy","helpBackground","helpBackgroundBright","buildingIcon","buildingType","troopIcon","troopType","dotIcon","color","scavengeOption","optionId","serverOffsetFromUtc","server_utc_diff","localOffsetFromUtc","Date","getTimezoneOffset","pretendServerIsUTC","cheeseDate","addMilliseconds","TwCheeseDate_TwCheeseDate","arguments","Timing","getCurrentServerTime","getTime","days","ret","clone","setUTCDate","getUTCDate","hours","setUTCHours","getUTCHours","minutes","setUTCMinutes","getUTCMinutes","seconds","setUTCSeconds","getUTCSeconds","milliseconds","setUTCMilliseconds","getUTCMilliseconds","addDays","addHours","addMinutes","addSeconds","getUTCFullYear","getUTCMonth","date","now","isSameDayInUtc","tomorrow","otherDate","includeMillis","year","monthName","toLocaleString","month","day","toString","padStart","ms","Math","round","getMonth","Resource_Resource","amount","TYPE_TIMBER","TYPE_CLAY","TYPE_IRON","Resources_Resources","woodAmount","stoneAmount","ironAmount","other","factor","maxAmount","min","valueOf","TYPES","Command_Command","arrival","newServerDate","haul","haulCapacity","sum","sumLoot","fromTime","toTime","equals","commands","command","add","relevantCommands","filter","arrivesDuring","sumProps","cssInitd","initCss","css","appendTo","unfadeGameContent","remove","fadeGameContentExcept","$faderLeft","spawnFader","$faderRight","$faderTopMenu","$faderTopScreen","$faderBottomScreen","$faderBottomMenu","topMenuHeight","screenWidth","screenHeight","$bottomMenu","$topMenu","updateFaders","outerHeight","outerWidth","max","scrollHeight","documentElement","clientHeight","offset","top","left","width","height","updateFaderLeft","right","updateFaderRight","position","updateFaderTopMenu","zIndex","updateFaderTopScreen","updateFaderBottomScreen","bottom","updateFaderBottomMenu","background","opacity","mouseEvents","mouseBubbleEvents","mouseEventsNeedSpecial","Mousetrap","$trap","prevIntendedTarget","watchers","mouseout","setupHandling","trapEvents","hide","intendedTarget","elementFromPoint","offsetX","offsetY","show","notifyWatchers","watcher","$elements","each","doesElMatch","handler","eventName","Config_Config","id","props","_loadCachedData","prop","defaultValue","propPath","tokens","split","token","getProp","setProp","_save","saved","localStorage","getItem","parse","_beforeSave","setItem","_getCacheableData","throttle","maxBurstsPerSecond","recentRequests","Array","unshift","performance","pop","anchorTimestamp","delayMs","originalFetch","requestDocument","sleepIfNeeded","responseText","doc","DOMParser","parseFromString","requestWasMade","apply","RemoteConfig_RemoteConfig","ttl","needsUpdate","update","timeUpdated","xmlDoc","requestXml","_processXml","parseXmlNode","children","parseFloat","innerHTML","childNode","tagName","config","userConfig","setUrl","domain","setTtl","HaulStatsWidget_HaulStatsWidget","pageNumber","initStructure","watchSelf","$to","find","last","updateSum","createHtml","trim","$from","$sum","$toggleIcon","$content","latestCommandArrival","summationFromOptions","summationToOptions","hourlyBreakdowns","startOfHour","endOfHour","hourOfDay","getServerHours","dayHint","sumPropsFromTimeframe","calcHaulPercent","pageInfo","collapsed","isTodayOnServer","isTomorrowOnServer","toLocaleDateString","preventDefault","toggleCollapse","startTime","parseInt","val","endTime","tmpTime","toggle","duration","willCollapse","attr","includes","set","ProgressMonitor","progress","goal","progressHandlers","size","notifyChange","promptLoadHauls","onConfirm","popupHtml","$progressBarFiller","$progressText","progressMonitor","onChange","percent","updateProgress","skipKey","skippableId","alertPremiumRequired","buttonText","buttonAcknowledge","UI","ConfirmationBox","twAlert","parseArrival","market","monthNumber","yearShort","millis","match","parseArrivalCzech","parseArrivalPortuguese","parseArrivalEnglish","scrapeCommand","gameDoc","tables","getElementsByTagName","rowMap","table","originRows","rows","cells","rowSpan","destRows","originPlayer","originVillage","headerRows","destPlayer","destVillage","catapultTarget","arrivalIn","estimatedReturn","mapFirstTable","resCell","resourcesContainer","$res","resAmount","resIconCssClass","icon","parent","scrapeResources","haulText","search","substring","scrapeCommandUrlFromRow","row","links","rowHtml","href","scrapeErrorMessage","$error","debugActions","trySelectCommandFromTable","na","$commandsTable","$commandRows","scrollTop","mousetrap","spawn","outline","cleanup","destruct","tryScrapeCommandScreen","commandUrl","commandDoc","HTMLDocument","processCfg","AtCommandsOverview_processCfg","haulsIncluded","enhanceScreenWithHaulInfo","returningCommands","commandsTable","commandCount","goalDetermined","firstCell","toLowerCase","colSpan","errorMessage","progressMade","appendHaulColsToCommandsTable","currentPage","scrapePageNumber","insertAfter","atCommandsOverview","here","location","suggestRedirectToCommandsOverview","screen","screenName","uriParams","InfoMessage","TribalWars","redirect","buttonConfirm","skipNextTime","confirm","buildContent","suggestRedirect","processFactory","registerTool","use","premium","ErrorMessage","getDebugProcess"],"mappings":"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","file":"../OverviewHauls.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 8);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return DebugEvents; });\nconst DebugEvents = {\r\n  PHASE_COMPLETION_READY: 'phase_completion_ready',\r\n  PHASE_COMPLETION_NOT_READY: 'phase_completion_not_ready',\r\n  PHASE_CHANGED: 'phase_changed',\r\n  QUESTION_ANSWERED: 'question_answered',\r\n  QUESTION_NOT_ANSWERED: 'question_not_answered',\r\n  OPTION_VALUE_CHANGED: 'answer_value_changed',\r\n  BUG_REPORT_SUCCEEDED: 'bug_report_succeeded',\r\n  BUG_REPORT_FAILED: 'bug_report_failed',\r\n  USER_REJECTED: 'user_rejected'\r\n};\r\n\r\n\r\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Phase; });\nclass Phase {\r\n  constructor(phaseName) {\r\n    this.name = phaseName;\r\n    this.followsUpOn = null;\r\n    this.autoComplete = false;\r\n  }\r\n\r\n  setFollowsUpOn(thingToFollowUpOn) {\r\n    this.followsUpOn = thingToFollowUpOn;\r\n    return this;\r\n  }\r\n\r\n  setAutoComplete(auto) {\r\n    this.autoComplete = auto;\r\n    return this;\r\n  }\r\n\r\n  getType() {\r\n    throw Error('notimplemented');\r\n  }\r\n\r\n  start() {\r\n    throw Error('not implemented');\r\n  }\r\n\r\n  checkCompletionReady() {\r\n    throw Error('not implemented');\r\n  }\r\n\r\n  getThingsToFollowUpOn() {\r\n    throw Error('not implemented');\r\n  }\r\n\r\n  getSummary() {\r\n    throw Error('not implemented');\r\n  }\r\n\r\n}\r\n\r\n\r\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return PhaseTypes; });\nconst PhaseTypes = {\r\n  ATTEMPT: 'attempt',\r\n  QUESTION: 'question',\r\n  REPORT: 'report'\r\n};\r\n\r\n\r\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ProcessFactory; });\n/* harmony import */ var _src_Models_Debug_DebugProcess_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);\n/* harmony import */ var _src_Models_Debug_Build_PhaseFactory_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6);\n/* harmony import */ var _src_Models_Debug_BugReporter_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(7);\n/* harmony import */ var _src_Models_Debug_PhaseReport_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(5);\n\r\n\r\n\r\n\r\n\r\n\r\nfunction lazyEvalUsingParent(parentPhase) {\r\n  return (str) => {\r\n    return () => {\r\n      let parentResult = parentPhase.result;\r\n      return eval(str);\r\n    };\r\n  }\r\n}\r\n\r\n\r\nclass ProcessFactory {\r\n\r\n  constructor(actions) {\r\n    this.phaseFactory = new _src_Models_Debug_Build_PhaseFactory_js__WEBPACK_IMPORTED_MODULE_1__[/* PhaseFactory */ \"a\"](actions);\r\n  }\r\n\r\n  create(name, cfg, finishWithReport) {\r\n    let process = new _src_Models_Debug_DebugProcess_js__WEBPACK_IMPORTED_MODULE_0__[/* DebugProcess */ \"a\"](name);\r\n\r\n    for (let phaseCfg of cfg.phases) {\r\n      process.enqueuePhase(this.createPhase(phaseCfg));\r\n    }\r\n\r\n    if (finishWithReport) {\r\n      let bugReporter = new _src_Models_Debug_BugReporter_js__WEBPACK_IMPORTED_MODULE_2__[/* BugReporter */ \"a\"](process);\r\n      process.enqueuePhase(_src_Models_Debug_PhaseReport_js__WEBPACK_IMPORTED_MODULE_3__[/* PhaseReport */ \"a\"].create(bugReporter));\r\n    }\r\n\r\n    return process;\r\n  }\r\n\r\n  createPhase(cfg, lazyEval) {\r\n    let phase = this.phaseFactory.create(cfg, lazyEval);\r\n    this.addFollowUpPhasesForSuccess(phase, cfg);\r\n    this.addFollowUpPhasesForAnswers(phase, cfg);\r\n    return phase;\r\n  }\r\n\r\n  addFollowUpPhasesForSuccess(phase, cfg) {\r\n    if (cfg.type === 'PhaseAttempt' && cfg.success) {\r\n      for (let phaseCfg of cfg.success) {\r\n        let subPhase = this.createPhase(phaseCfg, lazyEvalUsingParent(phase));\r\n        phase.addSuccessFollowUp(subPhase);\r\n      }\r\n    }\r\n  }\r\n\r\n  addFollowUpPhasesForAnswers(phase, cfg) {\r\n    if (cfg.type !== 'PhaseQuestion') {\r\n      return;\r\n    }\r\n\r\n    for (let [q, questionCfg] of Object.entries(cfg.questions)) {\r\n      if (questionCfg.type !== 'QuestionSelect') {\r\n        continue;\r\n      }\r\n      for (let [o, optionCfg] of Object.entries(questionCfg.options)) {\r\n        if (optionCfg.followUp) {\r\n          for (let phaseCfg of optionCfg.followUp) {\r\n            let option = phase.questions[q].options[o];\r\n            let subPhase = this.createPhase(phaseCfg, lazyEvalUsingParent(phase))\r\n            option.addFollowUp(subPhase);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n};\r\n\r\n\r\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return DebugProcess; });\n/* harmony import */ var _src_Models_Debug_DebugEvents_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);\n\r\n\r\n\r\nclass DebugProcess {\r\n  constructor(processName) {\r\n    this.name = processName;\r\n    this.phases = [];\r\n    this.currentPhaseIndex = -1;\r\n  }\r\n\r\n  enqueuePhase(phase) {\r\n    this.phases.push(phase);\r\n    this.watchPhase(phase);\r\n    return this;\r\n  }\r\n\r\n  insertPhase(phase) {\r\n    this.phases.splice(this.currentPhaseIndex + 1, 0, phase);\r\n    this.watchPhase(phase);\r\n    return this;\r\n  }\r\n\r\n  watchPhase(phase) {\r\n    let events = [\r\n      _src_Models_Debug_DebugEvents_js__WEBPACK_IMPORTED_MODULE_0__[/* DebugEvents */ \"a\"].PHASE_COMPLETION_READY,\r\n      _src_Models_Debug_DebugEvents_js__WEBPACK_IMPORTED_MODULE_0__[/* DebugEvents */ \"a\"].PHASE_COMPLETION_NOT_READY,\r\n      _src_Models_Debug_DebugEvents_js__WEBPACK_IMPORTED_MODULE_0__[/* DebugEvents */ \"a\"].PHASE_CHANGED\r\n    ];\r\n\r\n    $(phase).on(events.join(' '), (e) => $(this).trigger(e.type, e));\r\n\r\n    $(phase).on(_src_Models_Debug_DebugEvents_js__WEBPACK_IMPORTED_MODULE_0__[/* DebugEvents */ \"a\"].PHASE_COMPLETION_READY, () => {\r\n      if (phase.autoComplete) {\r\n        this.goToNextPhase();\r\n      }\r\n    });\r\n  }\r\n\r\n  start() {\r\n    this.currentPhaseIndex = -1;\r\n    this.goToNextPhase();\r\n  }\r\n\r\n  goToNextPhase() {\r\n    if (this.currentPhaseIndex >= 0) {\r\n      for (let thing of this.getCurrentPhase().getThingsToFollowUpOn()) {\r\n        for (let phase of thing.followUpPhases) {\r\n          this.insertPhase(phase);\r\n        }\r\n      }\r\n    }\r\n    if (!this.hasNextPhase()) {\r\n      throw Error(`there's no next phase`);\r\n    }\r\n    this.currentPhaseIndex++;\r\n    $(this).trigger(_src_Models_Debug_DebugEvents_js__WEBPACK_IMPORTED_MODULE_0__[/* DebugEvents */ \"a\"].PHASE_CHANGED);\r\n    this.getCurrentPhase().checkCompletionReady();\r\n    this.getCurrentPhase().start();\r\n  }\r\n\r\n  hasNextPhase() {\r\n    return this.currentPhaseIndex < this.phases.length - 1;\r\n  }\r\n\r\n  getCurrentPhase() {\r\n    return this.phases[this.currentPhaseIndex];\r\n  }\r\n\r\n  getSummarySoFar() {\r\n    // everything before the current phase\r\n    return this.phases.slice(0, this.currentPhaseIndex)\r\n      .map(phase => phase.getSummary());\r\n  }\r\n\r\n  static create(processName) {\r\n    return new DebugProcess(processName);\r\n  }\r\n\r\n}\r\n\r\n\r\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return PhaseReport; });\n/* harmony import */ var _src_Models_Debug_Phase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);\n/* harmony import */ var _src_Models_Debug_DebugEvents_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);\n/* harmony import */ var _src_Models_Debug_PhaseTypes_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2);\n\r\n\r\n\r\n\r\n\r\nconst Status = {\r\n  SUCCESS: 'success',\r\n  FAIL: 'fail',\r\n  NOT_ATTEMPTED: 'not_attempted'\r\n};\r\n\r\n\r\nclass PhaseReport extends _src_Models_Debug_Phase_js__WEBPACK_IMPORTED_MODULE_0__[/* Phase */ \"a\"] {\r\n  constructor(bugReporter) {\r\n    super('send bug report');\r\n    this.bugReporter = bugReporter;\r\n    this.status = Status.NOT_ATTEMPTED;\r\n    this.error;\r\n  }\r\n\r\n  getType() {\r\n    return _src_Models_Debug_PhaseTypes_js__WEBPACK_IMPORTED_MODULE_2__[/* PhaseTypes */ \"a\"].REPORT;\r\n  }\r\n\r\n  start() {\r\n    let report = this.bugReporter.buildReport();\r\n    this.bugReporter.submitReport(report)\r\n      .then(d => {\r\n        this.status = Status.SUCCESS;\r\n        $(this).trigger({\r\n          type: _src_Models_Debug_DebugEvents_js__WEBPACK_IMPORTED_MODULE_1__[/* DebugEvents */ \"a\"].BUG_REPORT_SUCCEEDED,\r\n          url: d.html_url\r\n        })\r\n      })\r\n      .catch(error => {\r\n        this.error = error;\r\n        this.status = Status.FAIL;\r\n        $(this).trigger(_src_Models_Debug_DebugEvents_js__WEBPACK_IMPORTED_MODULE_1__[/* DebugEvents */ \"a\"].BUG_REPORT_FAILED)\r\n      })\r\n      .finally(() => this.checkCompletionReady());\r\n  }\r\n\r\n  checkCompletionReady() {\r\n    if (this.status !== Status.NOT_ATTEMPTED) {\r\n      $(this).trigger(_src_Models_Debug_DebugEvents_js__WEBPACK_IMPORTED_MODULE_1__[/* DebugEvents */ \"a\"].PHASE_COMPLETION_READY);\r\n    } else {\r\n      $(this).trigger(_src_Models_Debug_DebugEvents_js__WEBPACK_IMPORTED_MODULE_1__[/* DebugEvents */ \"a\"].PHASE_COMPLETION_NOT_READY);\r\n    }\r\n  }\r\n\r\n  getThingsToFollowUpOn() {\r\n    return [];\r\n  }\r\n\r\n  getSummary() {\r\n    return {\r\n      phaseName: this.name\r\n    };\r\n  }\r\n\r\n  static create(bugReporter) {\r\n    return new PhaseReport(bugReporter);\r\n  }\r\n}\r\n\r\n\r\n\r\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXTERNAL MODULE: ./src/Models/Debug/Phase.js\nvar Phase = __webpack_require__(1);\n\n// EXTERNAL MODULE: ./src/Models/Debug/DebugEvents.js\nvar DebugEvents = __webpack_require__(0);\n\n// EXTERNAL MODULE: ./src/Models/Debug/PhaseTypes.js\nvar PhaseTypes = __webpack_require__(2);\n\n// CONCATENATED MODULE: ./src/Models/Debug/PhaseAttempt.js\n\r\n\r\n\r\n\r\nconst Status = {\r\n  SUCCESS: 'success',\r\n  FAIL: 'fail',\r\n  NOT_ATTEMPTED: 'not_attempted'\r\n};\r\n\r\n\r\nclass PhaseAttempt_PhaseAttempt extends Phase[\"a\" /* Phase */] {\r\n  constructor(phaseName, asyncFunctionToAttempt) {\r\n    super(phaseName);\r\n    this.instructions;\r\n    this.attempt = asyncFunctionToAttempt;\r\n    this.success = async () => {\r\n    };\r\n    this.fail = async () => {\r\n    };\r\n    this.status = Status.NOT_ATTEMPTED;\r\n    this.autoComplete = true;\r\n    this._error;\r\n    this._result;\r\n    this.summarizeData = d => d;\r\n    this.ctrl = {};\r\n\r\n    this.successFollowUpPhases = [];\r\n  }\r\n\r\n  getType() {\r\n    return PhaseTypes[\"a\" /* PhaseTypes */].ATTEMPT;\r\n  }\r\n\r\n  get result() {\r\n    if (this.status === Status.NOT_ATTEMPTED) {\r\n      throw new Error('tried to get result before the attempt settled');\r\n    }\r\n    if (this.status === Status.FAIL) {\r\n      throw new Error(`tried to get result of an attempt that failed`);\r\n    }\r\n    return this._result;\r\n  }\r\n\r\n  async doAttempt() {\r\n    try {\r\n      let result = await this.abortableAttempt();\r\n      this.status = Status.SUCCESS;\r\n      this._result = result;\r\n      await this.success(result);\r\n    } catch (err) {\r\n      console.warn(err);\r\n      this.status = Status.FAIL;\r\n      this._error = err;\r\n      await this.fail(err);\r\n    }\r\n    this.checkCompletionReady();\r\n  }\r\n\r\n  async abortableAttempt() {\r\n    return new Promise(async (resolve, reject) => {\r\n      $(this.ctrl).on(DebugEvents[\"a\" /* DebugEvents */].USER_REJECTED, () => reject('user rejected'));\r\n      try {\r\n        let parentResult;\r\n        if (this.followsUpOn) {\r\n          parentResult = this.followsUpOn.result;\r\n        }\r\n        let result = await this.attempt(parentResult, this.ctrl);\r\n        resolve(result);\r\n      } catch (err) {\r\n        reject(err);\r\n      }\r\n    });\r\n  }\r\n\r\n  userAbort() {\r\n    $(this.ctrl).trigger(DebugEvents[\"a\" /* DebugEvents */].USER_REJECTED);\r\n  }\r\n\r\n  setInstructions(instructions) {\r\n    this.instructions = instructions;\r\n    return this;\r\n  }\r\n\r\n  setDataSummarizer(func) {\r\n    this.summarizeData = func;\r\n    return this;\r\n  }\r\n\r\n  onSuccess(cb) {\r\n    this.success = cb;\r\n    return this;\r\n  }\r\n\r\n  addSuccessFollowUp(phase) {\r\n    this.successFollowUpPhases.push(phase);\r\n    phase.setFollowsUpOn(this);\r\n    return this;\r\n  }\r\n\r\n  get followUpPhases() {\r\n    if (this.status === Status.SUCCESS) {\r\n      return this.successFollowUpPhases;\r\n    }\r\n    return [];\r\n  }\r\n\r\n  onFail(cb) {\r\n    this.fail = cb;\r\n    return this;\r\n  }\r\n\r\n  start() {\r\n    this.doAttempt();\r\n  }\r\n\r\n  checkCompletionReady() {\r\n    if (this.status !== Status.NOT_ATTEMPTED) {\r\n      $(this).trigger(DebugEvents[\"a\" /* DebugEvents */].PHASE_COMPLETION_READY);\r\n    } else {\r\n      $(this).trigger(DebugEvents[\"a\" /* DebugEvents */].PHASE_COMPLETION_NOT_READY);\r\n    }\r\n  }\r\n\r\n  getThingsToFollowUpOn() {\r\n    return [this];\r\n  }\r\n\r\n  getSummary() {\r\n    return {\r\n      phaseName: this.name,\r\n      status: this.status,\r\n      data: typeof this._result === 'undefined' ? this._result : this.summarizeData(this._result),\r\n      error: this.summarizeError()\r\n    }\r\n  }\r\n\r\n  summarizeError() {\r\n    let err = this._error;\r\n    if (!(err instanceof Error)) {\r\n      return err;\r\n    }\r\n    return {\r\n      message: err.message,\r\n      name: err.name,\r\n      extra: err.extra,\r\n      stack: err.stack\r\n    };\r\n  }\r\n\r\n  static create(phaseNum, functionToAttempt) {\r\n    return new PhaseAttempt_PhaseAttempt(phaseNum, functionToAttempt);\r\n  }\r\n\r\n}\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Debug/PhaseQuestion.js\n\r\n\r\n\r\n\r\n\r\nclass PhaseQuestion_PhaseQuestion extends Phase[\"a\" /* Phase */] {\r\n  constructor(phaseName) {\r\n    super(phaseName);\r\n    this.questions = [];\r\n    this._examinedHtml;\r\n  }\r\n\r\n  getType() {\r\n    return PhaseTypes[\"a\" /* PhaseTypes */].QUESTION;\r\n  }\r\n\r\n  lookAt(html) {\r\n    this._examinedHtml = html;\r\n    return this;\r\n  }\r\n\r\n  get examinedHtml() {\r\n    if (typeof this._examinedHtml === 'function') {\r\n      return this._examinedHtml();\r\n    }\r\n    return this._examinedHtml;\r\n  }\r\n\r\n  addQuestion(question) {\r\n    this.questions.push(question);\r\n    $(question).on(DebugEvents[\"a\" /* DebugEvents */].QUESTION_ANSWERED, () => {\r\n      this.checkCompletionReady();\r\n    });\r\n    $(question).on(DebugEvents[\"a\" /* DebugEvents */].QUESTION_NOT_ANSWERED, () => {\r\n      this.checkCompletionReady();\r\n    });\r\n    return this;\r\n  }\r\n\r\n  start() {\r\n    // do nothing;\r\n  }\r\n\r\n  checkCompletionReady() {\r\n    for (let question of this.questions) {\r\n      if (!question.isAnswered()) {\r\n        $(this).trigger(DebugEvents[\"a\" /* DebugEvents */].PHASE_COMPLETION_NOT_READY);\r\n        return;\r\n      }\r\n    }\r\n    $(this).trigger(DebugEvents[\"a\" /* DebugEvents */].PHASE_COMPLETION_READY);\r\n  }\r\n\r\n  getThingsToFollowUpOn() {\r\n    return this.questions.reduce((acc, question) => acc.concat(question.getThingsToFollowUpOn()), []);\r\n  }\r\n\r\n  getSummary() {\r\n    return {\r\n      phaseName: this.name,\r\n      questions: this.questions.map(question => question.getSummary())\r\n    };\r\n  }\r\n\r\n  static create(phaseName) {\r\n    return new PhaseQuestion_PhaseQuestion(phaseName);\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Debug/QuestionTypes.js\nconst QuestionTypes = {\r\n  VALUE: 'value',\r\n  FREE_FORM: 'free_form',\r\n  SELECT: 'select'\r\n};\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Debug/Question.js\n\r\n\r\n\r\nclass Question_Question {\r\n  constructor(text) {\r\n    this.text = text;\r\n    this.options = [];\r\n    this.selectedOptionIndex = null;\r\n  }\r\n\r\n  getType() {\r\n    throw Error('not implemented');\r\n  }\r\n\r\n  addOption(option) {\r\n    this.options.push(option);\r\n    return this;\r\n  }\r\n\r\n  setSelectedOption(index) {\r\n    this.selectedOptionIndex = index;\r\n    $(this).trigger(DebugEvents[\"a\" /* DebugEvents */].QUESTION_ANSWERED);\r\n    return this;\r\n  }\r\n\r\n  isAnswered() {\r\n    return this.selectedOptionIndex !== null;\r\n  }\r\n\r\n  getSelectedOption() {\r\n    return this.options[this.selectedOptionIndex];\r\n  }\r\n\r\n  getThingsToFollowUpOn() {\r\n    let option = this.getSelectedOption();\r\n    return (option.followUpPhases.length > 0) ? [option] : [];\r\n  }\r\n\r\n  getSummary() {\r\n    return {\r\n      question: this.text,\r\n      answer: this.getSelectedOption().value\r\n    };\r\n  }\r\n\r\n  static create(text) {\r\n    return new Question_Question(text);\r\n  }\r\n}\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Debug/QuestionSelect.js\n\r\n\r\n\r\n\r\nclass QuestionSelect_QuestionSelect extends Question_Question {\r\n  getType() {\r\n    return QuestionTypes.SELECT;\r\n  }\r\n\r\n  static create(text) {\r\n    return new QuestionSelect_QuestionSelect(text);\r\n  }\r\n}\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Debug/Option.js\n\r\n\r\n\r\nclass Option_Option {\r\n  constructor(humanText, value, className = '') {\r\n    this.text = humanText;\r\n    this.value = value;\r\n    this.className = className;\r\n    this.followUpPhases = [];\r\n  }\r\n\r\n  addFollowUp(phase) {\r\n    this.followUpPhases.push(phase);\r\n    phase.setFollowsUpOn(this);\r\n    return this;\r\n  }\r\n\r\n  setValue(value) {\r\n    this.value = value;\r\n    $(this).trigger(DebugEvents[\"a\" /* DebugEvents */].OPTION_VALUE_CHANGED);\r\n  }\r\n\r\n  static create(humanText, value, className) {\r\n    return new Option_Option(humanText, value, className);\r\n  }\r\n\r\n}\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Debug/QuestionFreeForm.js\n\r\n\r\n\r\n\r\n\r\n\r\nclass QuestionFreeForm_QuestionFreeForm extends Question_Question {\r\n\r\n  constructor(questionText, placeholderText, minResponseLength = 0) {\r\n    super(questionText);\r\n    this.minResponseLength = minResponseLength;\r\n    this.options = [\r\n      Option_Option.create(placeholderText, '', 'free-form')\r\n    ];\r\n    this.setSelectedOption(0);\r\n    this.watchSelectedOption();\r\n  }\r\n\r\n  getType() {\r\n    return QuestionTypes.FREE_FORM;\r\n  }\r\n\r\n  watchSelectedOption() {\r\n    $(this.getSelectedOption()).on(DebugEvents[\"a\" /* DebugEvents */].OPTION_VALUE_CHANGED, () => {\r\n      if (this.isAnswered()) {\r\n        $(this).trigger(DebugEvents[\"a\" /* DebugEvents */].QUESTION_ANSWERED);\r\n      } else {\r\n        $(this).trigger(DebugEvents[\"a\" /* DebugEvents */].QUESTION_NOT_ANSWERED);\r\n      }\r\n    });\r\n  }\r\n\r\n  isAnswered() {\r\n    return super.isAnswered() && this.options[0].value.length >= this.minResponseLength;\r\n  }\r\n\r\n  static create(questionText, placeholderText, minResponseLength) {\r\n    return new QuestionFreeForm_QuestionFreeForm(questionText, placeholderText, minResponseLength);\r\n  }\r\n\r\n}\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Debug/Correctness.js\nconst Correctness = {\r\n  CORRECT: 'correct',\r\n  INCORRECT: 'incorrect',\r\n  NOT_SURE: 'not_sure'\r\n}\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Debug/QuestionValue.js\n\r\n\r\n\r\n\r\n\r\n\r\nconst OPTION_INCORRECT = 1;\r\n\r\nclass QuestionValue_QuestionValue extends Question_Question {\r\n\r\n  constructor(questionText, valueQuestioned) {\r\n    super(questionText);\r\n    this._valueQuestioned = valueQuestioned;\r\n    this.options = [\r\n      Option_Option.create('Correct', Correctness.CORRECT, 'correct'),\r\n      Option_Option.create('Incorrect', Correctness.INCORRECT, 'incorrect'),\r\n      Option_Option.create('Not sure', Correctness.NOT_SURE, 'not-sure')\r\n    ];\r\n  }\r\n\r\n  get value() {\r\n    if (typeof this._valueQuestioned === 'function') {\r\n      return this._valueQuestioned();\r\n    }\r\n    return this._valueQuestioned;\r\n  }\r\n\r\n  getType() {\r\n    return QuestionTypes.VALUE;\r\n  }\r\n\r\n  addFollowUp(phase) {\r\n    this.options[OPTION_INCORRECT].addFollowUp(phase);\r\n    return this;\r\n  }\r\n\r\n  getSummary() {\r\n    return Object.assign(super.getSummary(), {\r\n      valueChecked: this.value\r\n    });\r\n  }\r\n\r\n  static create(questionText, valueQuestioned) {\r\n    return new QuestionValue_QuestionValue(questionText, valueQuestioned);\r\n  }\r\n}\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Debug/Build/QuestionFactory.js\n\r\n\r\n\r\n\r\n\r\n\r\nclass QuestionFactory_QuestionFactory {\r\n\r\n  create(cfg, lazyEval) {\r\n    switch (cfg.type) {\r\n      case 'QuestionFreeForm':\r\n        return this.createQuestionFreeForm(cfg);\r\n      case 'QuestionSelect':\r\n        return this.createQuestionSelect(cfg);\r\n      case 'QuestionValue':\r\n        return this.createQuestionValue(cfg, lazyEval);\r\n      default:\r\n        throw `unrecognized question type: ${cfg.type}`;\r\n    }\r\n  }\r\n\r\n  createQuestionFreeForm(cfg) {\r\n    let minResponseLength = cfg.minResponseLength || 0;\r\n    return QuestionFreeForm_QuestionFreeForm.create(cfg.ask, cfg.placeholderText, minResponseLength);\r\n  }\r\n\r\n  createQuestionSelect(cfg) {\r\n    let question = QuestionSelect_QuestionSelect.create(cfg.ask);\r\n\r\n    for (let optionCfg of cfg.options) {\r\n      question.addOption(Option_Option.create(optionCfg.answer, optionCfg.value));\r\n    }\r\n\r\n    return question;\r\n  }\r\n\r\n  createQuestionValue(cfg, lazyEval) {\r\n    let valueExamined = lazyEval(cfg.examine);\r\n    return QuestionValue_QuestionValue.create(cfg.ask, valueExamined);\r\n  }\r\n\r\n}\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Debug/Build/PhaseFactory.js\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return PhaseFactory_PhaseFactory; });\n\r\n\r\n\r\n\r\n\r\nclass PhaseFactory_PhaseFactory {\r\n\r\n  constructor(actions) {\r\n    this.actions = actions;\r\n    this.questionFactory = new QuestionFactory_QuestionFactory();\r\n  }\r\n\r\n  create(cfg, lazyEval) {\r\n    switch (cfg.type) {\r\n      case 'PhaseAttempt':\r\n        return this.createPhaseAttempt(cfg);\r\n      case 'PhaseQuestion':\r\n        return this.createPhaseQuestion(cfg, lazyEval);\r\n      case 'PhaseReport':\r\n        return this.createPhaseReport(cfg);\r\n      default:\r\n        throw Error(`unrecognized phase type ${cfg.type}`);\r\n    }\r\n  }\r\n\r\n  createPhaseAttempt(cfg) {\r\n    let action = this.actions[cfg.action];\r\n    if (typeof action === 'undefined') {\r\n      throw Error(`unrecognized action: ${cfg.action}`);\r\n    }\r\n\r\n    let phase = PhaseAttempt_PhaseAttempt.create(cfg.internalName, action.execute);\r\n\r\n    if (action.summarizeResult) {\r\n      phase.setDataSummarizer(action.summarizeResult);\r\n    }\r\n    if (cfg.instructions) {\r\n      phase.setInstructions(cfg.instructions);\r\n    }\r\n    return phase;\r\n  }\r\n\r\n  createPhaseQuestion(cfg, lazyEval) {\r\n    let phase = PhaseQuestion_PhaseQuestion.create(cfg.internalName);\r\n\r\n    if (cfg.lookAt) {\r\n      phase.lookAt(lazyEval(cfg.lookAt));\r\n    }\r\n\r\n    for (let questionCfg of cfg.questions) {\r\n      let question = this.questionFactory.create(questionCfg, lazyEval);\r\n      phase.addQuestion(question);\r\n    }\r\n\r\n    return phase;\r\n  }\r\n\r\n}\r\n\r\n\r\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// CONCATENATED MODULE: ./src/Models/Debug/DataCollector.js\nclass DataCollector {\r\n  constructor(debugProcess) {\r\n    this.process = debugProcess;\r\n    this.censoredProps = new Set(['csrf', 'birthdate']);\r\n  }\r\n\r\n  getCollectibleData() {\r\n    return this.scrub(this.buildData());\r\n  }\r\n\r\n  buildData() {\r\n    let nav = window.navigator;\r\n\r\n    return {\r\n      process: this.process.getSummarySoFar(),\r\n      contentHtml: document.getElementById('contentContainer').outerHTML,\r\n      navigator: {\r\n        appCodeName: nav.app,\r\n        appName: nav.appName,\r\n        appVersion: nav.appVersion,\r\n        platfrom: nav.platfrom,\r\n        userAgent: nav.userAgent,\r\n        languages: $.extend(true, [], nav.languages),\r\n        oscpu: nav.oscpu\r\n      },\r\n      gameData: $.extend(true, {}, window.game_data)\r\n    }\r\n  }\r\n\r\n  scrub(d) {\r\n    if (typeof d === 'object' && d !== null) {\r\n      for (let key of Object.keys(d)) {\r\n        if (this.censoredProps.has(key)) {\r\n          d[key] = 'CENSORED';\r\n        } else {\r\n          d[key] = this.scrub(d[key]);\r\n        }\r\n      }\r\n    }\r\n    if (typeof d === 'string') {\r\n      return this.censorCsrfInString(d);\r\n    }\r\n    return d;\r\n  }\r\n\r\n  censorCsrfInString(s) {\r\n    return s.replace(/((&|&amp;)h=)(\\w+)/g, '$1CENSORED')\r\n      .replace(/(\\?h=)(\\w+)(&|&amp;)/g, '$1CENSORED$3')\r\n      .replace(/(csrf_token = ')(\\w+)/g, '$1CENSORED')\r\n      .replace(/(\"csrf\":\")(\\w+)/g, '$1CENSORED');\r\n  }\r\n}\r\n\r\n\r\n\n// CONCATENATED MODULE: ./conf/API.js\nlet API = {\r\n    bugReport: {\r\n        url: 'https://56hqsw3c2c.execute-api.us-east-2.amazonaws.com/prod/bugreport'\r\n    }\r\n}\r\n\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Debug/BugReporter.js\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return BugReporter_BugReporter; });\n\r\n\r\n\r\nclass BugReporter_BugReporter {\r\n  constructor(process) {\r\n    this.process = process;\r\n  }\r\n\r\n  buildReport() {\r\n    return {\r\n      title: '[Bug report] ' + this.process.name,\r\n      dataCollected: (new DataCollector(this.process)).getCollectibleData()\r\n    }\r\n  }\r\n\r\n  async submitReport(report) {\r\n    let message = [\r\n      '|game version|world|player|twcheese|',\r\n      '|---|---|---|---|',\r\n      `|${game_data.majorVersion}|${game_data.world}|${game_data.player.name}|${window.TwCheese.version}|`,\r\n      '```' + JSON.stringify(report.dataCollected, null, 2) + '```'\r\n    ].join(\"\\n\");\r\n    return await this.createIssue(report.title, message);\r\n  }\r\n\r\n  async createIssue(title, message) {\r\n    let response = await fetch(API.bugReport.url, {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        title: title,\r\n        message: message\r\n      })\r\n    });\r\n    if (!response.ok) {\r\n      throw new Error(`Failed to create issue. [${response.status}: ${response.statusText}]`);\r\n    }\r\n    return await response.json();\r\n  }\r\n\r\n}\r\n\r\n\r\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./src/Scrape/pagination.js\nfunction scrapePageNumber() {\r\n  let currentPage = $('#paged_view_content').children('table:eq(0)').find('strong').html();\r\n  if (currentPage && !currentPage.includes('all')) {\r\n    return parseInt(currentPage.match(/\\d+/)[0]);\r\n  }\r\n  return null;\r\n};\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Widget/AbstractWidget.js\nfunction afterDOMInsert(el, callback) {\r\n  let observer = new MutationObserver((mutations) => {\r\n    outerloop:\r\n      for (let mutation of mutations) {\r\n        for (let node of mutation.addedNodes) {\r\n          if (node === el || node.contains(el)) {\r\n            setTimeout(callback, 0);\r\n            observer.disconnect();\r\n            break outerloop;\r\n          }\r\n        }\r\n      }\r\n  });\r\n\r\n  observer.observe(document, {\r\n    attributes: true,\r\n    childList: true,\r\n    subtree: true\r\n  });\r\n}\r\n\r\n\r\nclass AbstractWidget {\r\n\r\n  insertBefore(el) {\r\n    this._beforeInsert();\r\n    $(el).before(this.$el);\r\n    return this;\r\n  }\r\n\r\n  insertAfter(el) {\r\n    this._beforeInsert();\r\n    $(el).after(this.$el);\r\n    return this;\r\n  }\r\n\r\n  appendTo(el) {\r\n    this._beforeInsert();\r\n    $(el).append(this.$el);\r\n    return this;\r\n  }\r\n\r\n  _beforeInsert() {\r\n    if (typeof this.afterInsert !== 'function') {\r\n      return;\r\n    }\r\n    let el = this.$el[0];\r\n    afterDOMInsert(el, () => this.afterInsert());\r\n  }\r\n\r\n}\r\n\r\n\r\n\n// CONCATENATED MODULE: ./conf/ImageSrc.js\nlet game = window.image_base;\r\nlet ImageSrc_self = window.TwCheese.ROOT + '/assets/images/';\r\n\r\nlet ImageSrc = {\r\n    plus: game + 'plus.png',\r\n    minus: game + 'minus.png',\r\n    wood: game + 'holz.png',\r\n    stone: game + 'lehm.png',\r\n    iron: game + 'eisen.png',\r\n    attack: game + 'command/attack.png',\r\n    haulPartial: game + 'max_loot/0.png',\r\n    haulFull: game + 'max_loot/1.png',\r\n    info: game + 'questionmark.png',\r\n    attackSentViaFa: game + 'command/farm.png',\r\n    attackSizeSmall: game + 'command/attack_small.png',\r\n    attackSizeMedium: game + 'command/attack_medium.png',\r\n    attackSizeLarge: game + 'command/attack_large.png',\r\n    attackContainsSnob: game + 'command/snob.png',\r\n    attackContainsSpy: game + 'command/spy.png',\r\n    attackContainsKnight: game + 'command/knight.png',\r\n    popupBackground: game + 'popup/content_background.png',\r\n    popupBorder: game + 'popup/border.png',\r\n    servant: game + 'paladin_new.png',\r\n    loadingSpinner: game + 'throbber.gif',\r\n    calendar: ImageSrc_self + 'calendar.png',\r\n    sidebarMain: ImageSrc_self + 'sidebar/gear.png',\r\n    sidebarBug: ImageSrc_self + 'sidebar/bug.png',\r\n    sidebarGithub: ImageSrc_self + 'sidebar/github.png',\r\n    jq: {\r\n        blue: ImageSrc_self + 'jquery/ui-icons_2e83ff_256x240.png',\r\n        black: ImageSrc_self + 'jquery/ui-icons_222222_256x240.png',\r\n        darkGrey: ImageSrc_self + 'jquery/ui-icons_454545_256x240.png',\r\n        grey: ImageSrc_self + 'jquery/ui-icons_888888_256x240.png',\r\n        red: ImageSrc_self + 'jquery/ui-icons_cd0a0a_256x240.png'\r\n    },\r\n    legacy: {\r\n        helpBackground: ImageSrc_self + 'legacy/help_background.png',\r\n        helpBackgroundBright: ImageSrc_self + 'legacy/help_background_highlight.png'\r\n    },    \r\n    buildingIcon: buildingType => game + `buildings/${buildingType}.png`,\r\n    troopIcon: troopType => game + `unit/unit_${troopType}.png`,\r\n    dotIcon: color => game + `dots/${color}.png`,\r\n    scavengeOption: optionId => game + `scavenging/options/${optionId}.png`,\r\n};\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/TwCheeseDate.js\n\r\n\r\nlet serverOffsetFromUtc = window.server_utc_diff * 1000;\r\nlet localOffsetFromUtc = new Date().getTimezoneOffset() * 60000;\r\n\r\nlet pretendServerIsUTC = function (cheeseDate) {\r\n  return cheeseDate.addMilliseconds(serverOffsetFromUtc)\r\n}\r\n\r\n\r\nclass TwCheeseDate_TwCheeseDate extends Date {\r\n  constructor() {\r\n    if (arguments.length === 0) {\r\n      super(window.Timing.getCurrentServerTime());\r\n    } else {\r\n      super(...arguments);\r\n    }\r\n  }\r\n\r\n  clone() {\r\n    return new TwCheeseDate_TwCheeseDate(this.getTime());\r\n  }\r\n\r\n  addDays(days) {\r\n    let ret = this.clone();\r\n    ret.setUTCDate(this.getUTCDate() + days);\r\n    return ret;\r\n  }\r\n\r\n  addHours(hours) {\r\n    let ret = this.clone();\r\n    ret.setUTCHours(this.getUTCHours() + hours);\r\n    return ret;\r\n  }\r\n\r\n  addMinutes(minutes) {\r\n    let ret = this.clone();\r\n    ret.setUTCMinutes(this.getUTCMinutes() + minutes);\r\n    return ret;\r\n  }\r\n\r\n  addSeconds(seconds) {\r\n    let ret = this.clone();\r\n    ret.setUTCSeconds(this.getUTCSeconds() + seconds);\r\n    return ret;\r\n  }\r\n\r\n  addMilliseconds(milliseconds) {\r\n    let ret = this.clone();\r\n    ret.setUTCMilliseconds(this.getUTCMilliseconds() + milliseconds);\r\n    return ret;\r\n  }\r\n\r\n  subDays(days) {\r\n    return this.addDays(-days);\r\n  }\r\n\r\n  subHours(hours) {\r\n    return this.addHours(-hours);\r\n  }\r\n\r\n  subMinutes(minutes) {\r\n    return this.addMinutes(-minutes);\r\n  }\r\n\r\n  subSeconds(seconds) {\r\n    return this.addSeconds(-seconds);\r\n  }\r\n\r\n  subMilliseconds(milliseconds) {\r\n    return this.addMilliseconds(-milliseconds);\r\n  }\r\n\r\n  getServerYear() {\r\n    return pretendServerIsUTC(this).getUTCFullYear();\r\n  }\r\n\r\n  getServerMonth() {\r\n    return pretendServerIsUTC(this).getUTCMonth();\r\n  }\r\n\r\n  getServerDate() {\r\n    return pretendServerIsUTC(this).getUTCDate();\r\n  }\r\n\r\n  getServerHours() {\r\n    return pretendServerIsUTC(this).getUTCHours();\r\n  }\r\n\r\n  getServerHours() {\r\n    return pretendServerIsUTC(this).getUTCHours();\r\n  }\r\n\r\n  getServerMinutes() {\r\n    return pretendServerIsUTC(this).getUTCMinutes();\r\n  }\r\n\r\n  getServerSeconds() {\r\n    return pretendServerIsUTC(this).getUTCSeconds();\r\n  }\r\n\r\n  getServerMilliseconds() {\r\n    return pretendServerIsUTC(this).getUTCMilliseconds();\r\n  }\r\n\r\n  isTodayOnServer() {\r\n    let date = pretendServerIsUTC(this);\r\n    let now = pretendServerIsUTC(new TwCheeseDate_TwCheeseDate());\r\n    return date.isSameDayInUtc(now);\r\n  }\r\n\r\n  isTomorrowOnServer() {\r\n    let date = pretendServerIsUTC(this);\r\n    let now = pretendServerIsUTC(new TwCheeseDate_TwCheeseDate());\r\n    let tomorrow = now.addDays(1);\r\n    return date.isSameDayInUtc(tomorrow);\r\n  }\r\n\r\n  isSameDayInUtc(otherDate) {\r\n    return this.getUTCFullYear() === otherDate.getUTCFullYear()\r\n      && this.getUTCMonth() === otherDate.getUTCMonth()\r\n      && this.getUTCDate() === otherDate.getUTCDate();\r\n  }\r\n\r\n  startOfHour() {\r\n    let ret = this.clone();\r\n    ret.setUTCMinutes(0);\r\n    ret.setUTCSeconds(0);\r\n    ret.setUTCMilliseconds(0);\r\n    return ret;\r\n  }\r\n\r\n  endOfHour() {\r\n    let ret = this.clone();\r\n    ret.setUTCMinutes(59);\r\n    ret.setUTCSeconds(59);\r\n    ret.setUTCMilliseconds(999);\r\n    return ret;\r\n  }\r\n\r\n  startOfSecond() {\r\n    let ret = this.clone();\r\n    ret.setUTCMilliseconds(0);\r\n    return ret;\r\n  }\r\n\r\n  equals(date) {\r\n    return this.getTime() === date.getTime();\r\n  }\r\n\r\n  toHtml(includeMillis = true) {\r\n    let d = pretendServerIsUTC(this);\r\n    let year = d.getUTCFullYear();\r\n    let monthName = d.toLocaleString('default', {month: 'short'});\r\n    let day = d.getUTCDate().toString().padStart(2, '0');\r\n    let hours = d.getUTCHours().toString().padStart(2, '0');\r\n    let minutes = d.getUTCMinutes().toString().padStart(2, '0');\r\n    let seconds = d.getUTCSeconds().toString().padStart(2, '0');\r\n    let ms = d.getUTCMilliseconds().toString().padStart(3, '0');\r\n\r\n    let html = `${monthName} ${day}, ${year} ${hours}:${minutes}:${seconds}`;\r\n    if (includeMillis) {\r\n      html += `<span class=\"small grey\">:${ms}</span>`;\r\n    }\r\n    return html;\r\n  }\r\n\r\n  toDebugString() {\r\n    let d = pretendServerIsUTC(this);\r\n    let year = d.getUTCFullYear();\r\n    let month = d.getUTCMonth().toString().padStart(2, '0');\r\n    let day = d.getUTCDate().toString().padStart(2, '0');\r\n    let hours = d.getUTCHours().toString().padStart(2, '0');\r\n    let minutes = d.getUTCMinutes().toString().padStart(2, '0');\r\n    let seconds = d.getUTCSeconds().toString().padStart(2, '0');\r\n    let ms = d.getUTCMilliseconds().toString().padStart(3, '0');\r\n    let offsetHours = Math.round(serverOffsetFromUtc / 360000) / 10;\r\n    return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}.${ms} ServerTime(UTC+${offsetHours})`;\r\n  }\r\n\r\n  imageSrc() {\r\n    return ImageSrc.calendar;\r\n  }\r\n\r\n  /**\r\n   * @params whatever would be passed to a Date constructor\r\n   * @return {TwCheeseDate}\r\n   */\r\n  static newServerDate() {\r\n    let ret = new TwCheeseDate_TwCheeseDate(...arguments);\r\n    if (arguments.length > 1) {\r\n      ret = ret.addMilliseconds(0 - serverOffsetFromUtc - localOffsetFromUtc);\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  static monthNumber(monthName) {\r\n    return (new Date(monthName + ' 1 1970')).getMonth();\r\n  }\r\n\r\n}\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Resource.js\n\r\n\r\nclass Resource_Resource {\r\n  constructor(type, amount) {\r\n    this.type = type;\r\n    this.amount = amount;\r\n  }\r\n\r\n  valueOf() {\r\n    return this.amount;\r\n  }\r\n\r\n  toString() {\r\n    return this.amount;\r\n  }\r\n\r\n  toDebugString() {\r\n    return this.amount;\r\n  }\r\n\r\n  imageSrc() {\r\n    return ImageSrc[this.type];\r\n  }\r\n\r\n}\r\n\r\nResource_Resource.TYPE_TIMBER = 'wood';\r\nResource_Resource.TYPE_CLAY = 'stone';\r\nResource_Resource.TYPE_IRON = 'iron';\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Resources.js\n\r\n\r\nclass Resources_Resources {\r\n  constructor(woodAmount = 0, stoneAmount = 0, ironAmount = 0) {\r\n    this.wood = new Resource_Resource(Resource_Resource.TYPE_TIMBER, woodAmount);\r\n    this.stone = new Resource_Resource(Resource_Resource.TYPE_CLAY, stoneAmount);\r\n    this.iron = new Resource_Resource(Resource_Resource.TYPE_IRON, ironAmount);\r\n  }\r\n\r\n  sum() {\r\n    return this.wood + this.stone + this.iron;\r\n  }\r\n\r\n  add(other) {\r\n    return new Resources_Resources(\r\n      this.wood + other.wood,\r\n      this.stone + other.stone,\r\n      this.iron + other.iron\r\n    );\r\n  }\r\n\r\n  multiply(factor) {\r\n    return new Resources_Resources(\r\n      this.wood * factor,\r\n      this.stone * factor,\r\n      this.iron * factor\r\n    );\r\n  }\r\n\r\n  cap(maxAmount) {\r\n    return new Resources_Resources(\r\n      Math.min(this.wood, maxAmount),\r\n      Math.min(this.stone, maxAmount),\r\n      Math.min(this.iron, maxAmount)\r\n    );\r\n  }\r\n\r\n  /**\r\n   * @param {Objecet} other\r\n   */\r\n  equals(other) {\r\n    return this.wood.valueOf() === other.wood.valueOf()\r\n      && this.stone.valueOf() === other.stone.valueOf()\r\n      && this.iron.valueOf() === other.iron.valueOf();\r\n  }\r\n\r\n  toArray() {\r\n    return [this.wood.amount, this.stone.amount, this.iron.amount];\r\n  }\r\n\r\n}\r\n\r\nResources_Resources.TYPES = [Resource_Resource.TYPE_TIMBER, Resource_Resource.TYPE_CLAY, Resource_Resource.TYPE_IRON];\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Command.js\n\r\n\r\n\r\nclass Command_Command {\r\n  constructor() {\r\n    this.arrival = TwCheeseDate_TwCheeseDate.newServerDate();\r\n    this.haul = new Resources_Resources(0, 0, 0);\r\n    this.haulCapacity = 0;\r\n  }\r\n\r\n  sumLoot() {\r\n    return this.haul.sum();\r\n  }\r\n\r\n  calcHaulPercent() {\r\n    if (this.haulCapacity === 0) {\r\n      return 0;\r\n    }\r\n    return Math.round(100 * this.sumLoot() / this.haulCapacity);\r\n  }\r\n\r\n  arrivesDuring(fromTime, toTime) {\r\n    return this.arrival >= fromTime && this.arrival <= toTime;\r\n  }\r\n\r\n  /**\r\n   * @param {Object} other\r\n   */\r\n  equals(other) {\r\n    return this.arrival.equals(other.arrival)\r\n      && this.haul.equals(other.haul)\r\n      && this.haulCapacity === other.haulCapacity;\r\n  }\r\n\r\n  static sumProps(commands) {\r\n    let sum = new Command_Command();\r\n\r\n    for (let command of commands) {\r\n      sum.haul = sum.haul.add(command.haul);\r\n      sum.haulCapacity += command.haulCapacity;\r\n    }\r\n    return sum;\r\n  }\r\n\r\n  static sumPropsFromTimeframe(commands, fromTime, toTime) {\r\n    let relevantCommands = commands.filter(command => command.arrivesDuring(fromTime, toTime));\r\n    return Command_Command.sumProps(relevantCommands);\r\n  }\r\n}\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Util/UI.js\n\r\n\r\n\r\nfunction escapeHtml(text) {\r\n  if (typeof text !== 'string') {\r\n    text = String(text);\r\n  }\r\n  // https://stackoverflow.com/a/4835406\r\n  var map = {\r\n    '&': '&amp;',\r\n    '<': '&lt;',\r\n    '>': '&gt;',\r\n    '\"': '&quot;',\r\n    \"'\": '&#039;'\r\n  };\r\n  return text.replace(/[&<>\"']/g, function (m) {\r\n    return map[m];\r\n  });\r\n}\r\n\r\n////// css //////\r\n\r\nlet cssInitd = new Set();\r\n\r\nfunction initCss(css) {\r\n  if (cssInitd.has(css)) {\r\n    return;\r\n  }\r\n  $(`<style>${css}</style>`).appendTo('head');\r\n  cssInitd.add(css);\r\n}\r\n\r\ninitCss(`\r\n    .twcheese-popup {\r\n        z-index: 13000;\r\n        display: block;\r\n        position: fixed;\r\n        top: 60px;\r\n        border: 19px solid #804000;\r\n        border-image: url(${ImageSrc.popupBorder}) 19 19 19 19 repeat;\r\n        left: 50%;\r\n        -webkit-transform: translateX(-50%);\r\n        transform: translateX(-50%);\r\n    }\r\n`);\r\n\r\n//////// faders ///////////\r\n\r\n\r\nfunction fadeGameContent() {\r\n  $('body').append('<div id=\"fader\" class=\"fader\">');\r\n};\r\n\r\n\r\nfunction unfadeGameContent() {\r\n  $('#fader').remove();\r\n  $('.twcheese-fader').remove();\r\n}\r\n\r\n\r\nfunction fadeGameContentExcept(el) {\r\n  let $el = $(el);\r\n\r\n  if ($el.length < 1) {\r\n    throw new Error('element does not exist');\r\n  }\r\n  if ($el.length > 1) {\r\n    throw new Error('expected exactly one element, got more');\r\n  }\r\n\r\n  let $faderLeft = spawnFader();\r\n  let $faderRight = spawnFader();\r\n  let $faderTopMenu = spawnFader();\r\n  let $faderTopScreen = spawnFader();\r\n  let $faderBottomScreen = spawnFader();\r\n  let $faderBottomMenu = spawnFader();\r\n\r\n  var $bottomMenu = $('#footer');\r\n  var $topMenu = $('#topContainer');\r\n  var topMenuHeight, screenWidth, screenHeight;\r\n\r\n  function updateMeasurements() {\r\n    topMenuHeight = $topMenu.outerHeight() + 3;\r\n    screenWidth = $('body').outerWidth();\r\n    screenHeight = Math.max($('#ds_body')[0].scrollHeight, document.documentElement.clientHeight);\r\n  }\r\n\r\n  function updateFaders() {\r\n    updateMeasurements();\r\n    updateFaderLeft();\r\n    updateFaderRight();\r\n    updateFaderTopMenu();\r\n    updateFaderTopScreen();\r\n    updateFaderBottomScreen();\r\n    updateFaderBottomMenu();\r\n  }\r\n\r\n\r\n  function updateFaderLeft() {\r\n    let offset = $el.offset();\r\n    $faderLeft.css({\r\n      top: 0,\r\n      left: 0,\r\n      width: offset.left,\r\n      height: screenHeight\r\n    });\r\n  }\r\n\r\n\r\n  function updateFaderRight() {\r\n    let offset = $el.offset();\r\n    $faderRight.css({\r\n      top: 0,\r\n      right: 0,\r\n      width: screenWidth - $el.outerWidth() - offset.left,\r\n      height: screenHeight\r\n    });\r\n  }\r\n\r\n\r\n  function updateFaderTopScreen() {\r\n    let offset = $el.offset();\r\n    $faderTopScreen.css({\r\n      top: topMenuHeight,\r\n      left: offset.left,\r\n      height: offset.top - topMenuHeight,\r\n      width: $el.outerWidth(),\r\n      zIndex: $('.top_bar').zIndex() - 1\r\n    });\r\n  }\r\n\r\n\r\n  function updateFaderBottomScreen() {\r\n    let offset = $el.offset();\r\n    $faderBottomScreen.css({\r\n      top: offset.top + $el.outerHeight(),\r\n      left: offset.left,\r\n      height: screenHeight - offset.top - $el.outerHeight(),\r\n      width: $el.outerWidth(),\r\n      zIndex: $bottomMenu.zIndex() - 1\r\n    });\r\n  }\r\n\r\n\r\n  function updateFaderTopMenu() {\r\n    let offset = $el.offset();\r\n    $faderTopMenu.css({\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: offset.left,\r\n      height: topMenuHeight,\r\n      width: $el.outerWidth()\r\n    });\r\n  }\r\n\r\n\r\n  function updateFaderBottomMenu() {\r\n    let offset = $el.offset();\r\n    $faderBottomMenu.css({\r\n      position: 'fixed',\r\n      bottom: 0,\r\n      left: offset.left,\r\n      height: $bottomMenu.outerHeight(),\r\n      width: $el.outerWidth()\r\n    });\r\n  }\r\n\r\n\r\n  function spawnFader() {\r\n    let css = {\r\n      position: 'absolute',\r\n      background: 'black',\r\n      opacity: 0.5,\r\n      zIndex: 12000\r\n    };\r\n    return $('<div class=\"twcheese-fader\"></div>').css(css).appendTo($('body'));\r\n  }\r\n\r\n  updateFaders();\r\n  $(window).on('resize', updateFaders);\r\n}\r\n\r\n\r\n// mousetrap ///////////////////////////////\r\n\r\nlet mouseEvents = ['click', 'mousemove', 'mousenter', 'mouseleave', 'mouseover', 'mouseout', 'mousedown', 'mouseup'];\r\nlet mouseBubbleEvents = new Set(['click', 'mousemove', 'mouseover', 'mouseout', 'mousedown', 'mouseup']);\r\nlet mouseEventsNeedSpecial = new Set(['mousenter', 'mouseleave', 'mouseover', 'mouseout']);\r\n\r\nclass Mousetrap {\r\n  constructor() {\r\n    this.$trap = $('<div class=\"twcheese-mousetrap\">').css({\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      width: '100%',\r\n      height: '100%',\r\n      background: 'cyan',\r\n      opacity: 0.001,\r\n      zIndex: 12000\r\n    })\r\n    this.prevIntendedTarget;\r\n\r\n    this.watchers = {\r\n      // example:\r\n      // click: [{$elements, handler}, {$elements, handler}]\r\n      mouseout: []\r\n    }\r\n\r\n    this.setupHandling();\r\n  }\r\n\r\n  spawn() {\r\n    this.$trap.appendTo('body');\r\n    return this;\r\n  }\r\n\r\n  destruct() {\r\n    this.$trap.remove();\r\n  }\r\n\r\n  setupHandling() {\r\n    let trapEvents = mouseEvents.filter(name => !mouseEventsNeedSpecial.has(name));\r\n\r\n    this.$trap.on(trapEvents.join(' '), (e) => {\r\n      this.$trap.hide();\r\n      let intendedTarget = document.elementFromPoint(e.offsetX, e.offsetY);\r\n      this.$trap.show();\r\n\r\n      this.notifyWatchers(e.type, e, intendedTarget);\r\n\r\n      if (e.type === 'mousemove' && intendedTarget !== this.prevIntendedTarget) {\r\n        this.notifyWatchers('mousenter', e, intendedTarget);\r\n        this.notifyWatchers('mouseleave', e, this.prevIntendedTarget);\r\n        this.notifyWatchers('mouseover', e, intendedTarget);\r\n\r\n        // mouseout\r\n        for (let watcher of this.watchers.mouseout) {\r\n          watcher.$elements.each((i, el) => {\r\n            if (\r\n              this.doesElMatch(el, 'mouseover', this.prevIntendedTarget)\r\n              && !this.doesElMatch(el, 'mouseover', intendedTarget)\r\n            ) {\r\n              watcher.handler.call(el, e);\r\n            }\r\n          });\r\n        }\r\n      }\r\n\r\n      this.prevIntendedTarget = intendedTarget;\r\n    });\r\n  }\r\n\r\n  notifyWatchers(eventName, e, intendedTarget) {\r\n    if (typeof this.watchers[eventName] === 'undefined') {\r\n      return;\r\n    }\r\n    for (let watcher of this.watchers[eventName]) {\r\n      watcher.$elements.each((i, el) => {\r\n        if (this.doesElMatch(el, eventName, intendedTarget)) {\r\n          watcher.handler.call(el, e);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  doesElMatch(el, eventName, intendedTarget) {\r\n    return el === intendedTarget\r\n      || (mouseBubbleEvents.has(eventName) && $.contains(el, intendedTarget));\r\n  }\r\n\r\n  on(eventName, $elements, handler) {\r\n    if (typeof this.watchers[eventName] === 'undefined') {\r\n      this.watchers[eventName] = [];\r\n    }\r\n    this.watchers[eventName].push({$elements, handler});\r\n    return this;\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Util/Object.js\nfunction getProp(object, propPath, defaultValue) {\r\n  let tokens = propPath.split('.');\r\n  for (let i = 0; i < tokens.length - 1; i++) {\r\n    let token = tokens[i];\r\n    if (typeof object[token] !== 'object' || token === null) {\r\n      return defaultValue;\r\n    }\r\n    object = object[token];\r\n  }\r\n  let value = object[tokens[tokens.length - 1]];\r\n  return (typeof value === 'undefined') ? defaultValue : value;\r\n}\r\n\r\n\r\nfunction setProp(object, propPath, value) {\r\n  let tokens = propPath.split('.');\r\n  for (let i = 0; i < tokens.length - 1; i++) {\r\n    let token = tokens[i];\r\n    if (typeof object[token] !== 'object' || token === null) {\r\n      object[token] = {};\r\n    }\r\n    object = object[token];\r\n  }\r\n  object[tokens[tokens.length - 1]] = value;\r\n}\r\n\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/Config.js\n\r\n\r\n\r\nclass Config_Config {\r\n  constructor(id) {\r\n    this.id = id;\r\n    this.props = {};\r\n    this._loadCachedData();\r\n  }\r\n\r\n  get(prop, defaultValue) {\r\n    return getProp(this.props, prop, defaultValue);\r\n  }\r\n\r\n  set(prop, value) {\r\n    setProp(this.props, prop, value);\r\n    this._save();\r\n  }\r\n\r\n  initProps(props) {\r\n    this.props = props;\r\n  }\r\n\r\n  /**\r\n   * @protected\r\n   * @return {object|null}\r\n   */\r\n  _loadCachedData() {\r\n    let saved = window.localStorage.getItem(this.id);\r\n    if (saved) {\r\n      let data = JSON.parse(saved);\r\n\r\n      // should ideally be data.props\r\n      // But for backwards compatibility, the data could be the props too.\r\n      this.props = data.props || data;\r\n      return data;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * @final\r\n   * @protected\r\n   */\r\n  _save() {\r\n    this._beforeSave();\r\n    window.localStorage.setItem(this.id, JSON.stringify(this._getCacheableData()));\r\n  }\r\n\r\n  /**\r\n   * @protected\r\n   */\r\n  _beforeSave() {\r\n\r\n  }\r\n\r\n  /**\r\n   * @protected\r\n   * @return {object}\r\n   */\r\n  _getCacheableData() {\r\n    return {\r\n      props: this.props\r\n    };\r\n  }\r\n\r\n}\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/RateLimiter.js\nclass RateLimiter {\r\n  constructor(maxBurstsPerSecond) {\r\n    this.maxBurstsPerSecond = maxBurstsPerSecond;\r\n    this.recentRequests = new Array(maxBurstsPerSecond);\r\n  }\r\n\r\n  requestWasMade() {\r\n    this.recentRequests.unshift(performance.now());\r\n    this.recentRequests.pop();\r\n  }\r\n\r\n  async sleepIfNeeded() {\r\n    let anchorTimestamp = this.recentRequests[this.maxBurstsPerSecond - 1];\r\n    if (typeof anchorTimestamp === 'undefined') {\r\n      return;\r\n    }\r\n    let delayMs = anchorTimestamp + 1000 - performance.now();\r\n    if (delayMs <= 0) {\r\n      return;\r\n    }\r\n    return new Promise(function (resolve, reject) {\r\n      setTimeout(resolve, delayMs);\r\n    });\r\n  }\r\n}\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Util/Network.js\n\r\n\r\nlet throttle = new RateLimiter(5);\r\n\r\nlet originalFetch = window.fetch;\r\nwindow.fetch = function () {\r\n  throttle.requestWasMade();\r\n  return originalFetch.apply(this, arguments);\r\n};\r\n\r\n\r\n/**\r\n * requests the document from a url\r\n * @param {string} url the url of the page to get the document from\r\n * @return {Promise}\r\n * @resolve {HTMLDocment}\r\n */\r\nasync function requestDocument(url) {\r\n  await throttle.sleepIfNeeded();\r\n  let response = await fetch(url);\r\n  let responseText = await response.text();\r\n  let doc = (new DOMParser()).parseFromString(responseText, 'text/html');\r\n\r\n  Object.defineProperty(doc, 'URL', {\r\n    get: () => url\r\n  });\r\n\r\n  return doc;\r\n};\r\n\r\n\r\n/**\r\n * requests xml document from a url\r\n * @param {string} url the url of the page to get the cml document from\r\n * @return {Promise}\r\n * @resolve {XMLDocument}\r\n */\r\nasync function requestXml(url) {\r\n  await throttle.sleepIfNeeded();\r\n  let response = await fetch(url);\r\n  let responseText = await response.text();\r\n  let xmlDoc = (new DOMParser()).parseFromString(responseText, 'text/xml');\r\n\r\n  Object.defineProperty(xmlDoc, 'URL', {\r\n    get: () => url\r\n  });\r\n\r\n  return xmlDoc;\r\n};\r\n\r\n\r\n/**\r\n * make a POST request to the game\r\n * @param {string} screen\r\n * @param {object} uriParams\r\n * @param {object} data\r\n * @return {Promise}\r\n * @resolve {object} response data from the game\r\n */\r\nasync function postToGame(screen, uriParams, data) {\r\n  await throttle.sleepIfNeeded();\r\n  return new Promise(function (resolve, reject) {\r\n    window.TribalWars.post(screen, uriParams, data, resolve, reject);\r\n  });\r\n}\r\n\r\n\r\nfunction gameUrl(screen, uriParams, method = 'GET') {\r\n  return 'https://' + document.domain + window.TribalWars.buildURL(method, screen, uriParams);\r\n}\r\n\r\n\r\nfunction attackPrepUrl(unitCounts, targetVillageId, originVillageId = window.game_data.village.id) {\r\n  let uriParams = {\r\n    from: 'reports',\r\n    village: originVillageId,\r\n    target: targetVillageId\r\n  };\r\n  for (let [unitType, count] of Object.entries(unitCounts)) {\r\n    uriParams[unitType] = count;\r\n  }\r\n  return gameUrl('place', uriParams);\r\n}\r\n\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/RemoteConfig.js\n\r\n\r\n\r\n\r\nfunction parseXmlNode(node) {\r\n  if (node.children.length === 0) {\r\n    return parseFloat(node.innerHTML) || null;\r\n  }\r\n  let object = {};\r\n  for (let childNode of node.children) {\r\n    object[childNode.tagName] = parseXmlNode(childNode);\r\n  }\r\n  return object;\r\n}\r\n\r\n\r\nclass RemoteConfig_RemoteConfig extends Config_Config {\r\n\r\n  /**\r\n   * @param {string} url\r\n   */\r\n  setUrl(url) {\r\n    this.url = url;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @param {number} seconds\r\n   */\r\n  setTtl(seconds) {\r\n    this.ttl = seconds * 1000;\r\n    return this;\r\n  }\r\n\r\n  async ensureUpdated() {\r\n    if (this.needsUpdate()) {\r\n      await this.update();\r\n    }\r\n  }\r\n\r\n  needsUpdate() {\r\n    let now = new Date().getTime();\r\n    let ttl = this.ttl || 86400;\r\n    return !this.timeUpdated || ttl < now - this.timeUpdated;\r\n  }\r\n\r\n  async update() {\r\n    let xmlDoc = await requestXml(this.url);\r\n    this._processXml(xmlDoc);\r\n    this._save();\r\n  }\r\n\r\n  /**\r\n   * @protected\r\n   * @param {XMLDocument} xmlDoc\r\n   */\r\n  _processXml(xmlDoc) {\r\n    this.props = parseXmlNode(xmlDoc).config;\r\n  }\r\n\r\n  /**\r\n   * @protected\r\n   * @return {object|null}\r\n   */\r\n  _loadCachedData() {\r\n    let data = super._loadCachedData();\r\n    if (data) {\r\n      this.timeUpdated = data.timeUpdated;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @protected\r\n   */\r\n  _beforeSave() {\r\n    this.timeUpdated = new Date().getTime();\r\n  }\r\n\r\n  /**\r\n   * @protected\r\n   * @return {object}\r\n   */\r\n  _getCacheableData() {\r\n    return Object.assign({}, super._getCacheableData(), {\r\n      timeUpdated: this.timeUpdated\r\n    });\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Util/Config.js\n\r\n\r\n\r\nlet userConfig = new Config_Config('twcheese.userConfig');\r\n\r\nlet gameConfig = (new RemoteConfig_RemoteConfig('twcheese.gameConfig'))\r\n  .setUrl(`https://${document.domain}/interface.php?func=get_config`)\r\n  .setTtl(8 * 3600);\r\n\r\nlet buildingConfig = (new RemoteConfig_RemoteConfig('twcheese.buildingConfig'))\r\n  .setUrl(`https://${document.domain}/interface.php?func=get_building_info`)\r\n  .setTtl(8 * 3600);\r\n\r\nlet troopConfig = (new RemoteConfig_RemoteConfig('twcheese.troopConfig'))\r\n  .setUrl(`https://${document.domain}/interface.php?func=get_unit_info`)\r\n  .setTtl(8 * 3600);\r\n\r\n\r\nasync function ensureRemoteConfigsUpdated() {\r\n  await Promise.all([\r\n    gameConfig.ensureUpdated(),\r\n    troopConfig.ensureUpdated(),\r\n    buildingConfig.ensureUpdated()\r\n  ]);\r\n}\r\n\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Widget/HaulStatsWidget.js\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass HaulStatsWidget_HaulStatsWidget extends AbstractWidget {\r\n\r\n  /**\r\n   * @param {Command[]} commands\r\n   * @param {int|null} pageNumber\r\n   */\r\n  constructor(commands, pageNumber) {\r\n    super();\r\n    this.commands = commands;\r\n    this.pageNumber = pageNumber;\r\n\r\n    this.initStructure();\r\n    this.watchSelf();\r\n\r\n    this.$to.find('option').last().prop('selected', true);\r\n    this.updateSum();\r\n  }\r\n\r\n  initStructure() {\r\n    this.$el = $(this.createHtml().trim());\r\n    this.$from = this.$el.find('#twcheese_pillaging_stats_from');\r\n    this.$to = this.$el.find('#twcheese_pillaging_stats_to');\r\n    this.$sum = this.$el.find('#twcheese_pillaging_results');\r\n    this.$toggleIcon = this.$el.find('#twcheese_pillaging_stats_toggle');\r\n    this.$content = this.$el.find('#twcheese_pillaging_stats_content');\r\n  }\r\n\r\n  createHtml() {\r\n    let summationFromOptions = [];\r\n    let summationToOptions = [];\r\n    let hourlyBreakdowns = [];\r\n\r\n    let startOfHour = TwCheeseDate_TwCheeseDate.newServerDate().startOfHour();\r\n    let latestCommandArrival;\r\n    if (this.commands.length > 0) {\r\n      latestCommandArrival = this.commands[this.commands.length - 1].arrival;\r\n    }\r\n\r\n    while (startOfHour < latestCommandArrival) {\r\n      let endOfHour = startOfHour.endOfHour();\r\n      let hourOfDay = startOfHour.getServerHours();\r\n      let dayHint = this.dayHint(startOfHour);\r\n\r\n      summationFromOptions.push(`<option value=${startOfHour.getTime()}>${hourOfDay}:00 ${dayHint}</option>`);\r\n      summationToOptions.push(`<option value=\"${endOfHour.getTime()}\">${hourOfDay}:59 ${dayHint}</option>`);\r\n\r\n      let result = Command_Command.sumPropsFromTimeframe(this.commands, startOfHour, endOfHour);\r\n      hourlyBreakdowns.push(`\r\n                <tr>\r\n                    <td>${hourOfDay}:00 - ${hourOfDay}:59 ${dayHint}</td>\r\n                    <td>${result.haul.wood}</td>\r\n                    <td>${result.haul.stone}</td>\r\n                    <td>${result.haul.iron}</td>\r\n                    <td>${result.sumLoot()}/${result.haulCapacity}</td>\r\n                    <td>${result.calcHaulPercent()}%</td>\r\n                </tr>\r\n            `);\r\n\r\n      startOfHour = startOfHour.addHours(1);\r\n    }\r\n\r\n    let pageInfo = this.pageNumber ? `from Page ${this.pageNumber}` : '';\r\n\r\n    let collapsed = userConfig.get('HaulStatsWidget.collapseStats', false);\r\n    let toggleIconSrc = collapsed ? ImageSrc.plus : ImageSrc.minus;\r\n    let contentDisplay = collapsed ? 'none' : 'block';\r\n\r\n    return `\r\n            <div id=\"twcheese_pillaging_stats\" class=\"vis widget\">\r\n                <h4>\r\n                    Pillaging Statistics\r\n                    <img id=\"twcheese_pillaging_stats_toggle\" src=\"${toggleIconSrc}\" style=\"float:right; cursor: pointer;\">\r\n                    <span style=\"font-size: 10px; font-style: normal; font-weight: normal; margin-right: 25px; float: right;\">\r\n                        created by <a target=\"_blank\" href=\"https://forum.tribalwars.net/index.php?members/28484/\">cheesasaurus</a> and maintained by <a target=\"_blank\" href=\"https://www.github.com/Jopika\">Jopika</a>\r\n                    </span>\r\n                </h4>\r\n                <div id=\"twcheese_pillaging_stats_content\" style=\"display: ${contentDisplay};\">\r\n                    <!-- summation -->\r\n                    <div class=\"twcheese-pillaging-stats-summation\">\r\n                        <div style=\"text-align: center; width: 100%; margin-top: 5px; margin-bottom: 5px;\">\r\n                            From <select id=\"twcheese_pillaging_stats_from\">${summationFromOptions.join('')}</select>\r\n                            to <select id=\"twcheese_pillaging_stats_to\">${summationToOptions.join('')}</select>\r\n                        </div>\r\n                        <div id=\"twcheese_pillaging_results\" style=\"text-align: center;\">\r\n                            Results displayed here...\r\n                        </div>\r\n                        <br/>\r\n                    </div>\r\n                    \r\n                    <!-- hourly breakdown -->\r\n                    <table class=\"twcheese-pillaging-stats-hourly-breakdown\" width=\"100%\">\r\n                        <tbody>\r\n                            <tr><td colspan=\"6\" style=\"text-align: center; font-size: 16px;\">Incoming Resources ${pageInfo}</td></tr>\r\n                            <tr>\r\n                                <th>Arrival</th>\r\n                                <th><img src=\"${ImageSrc.wood}\"></img></th>\r\n                                <th><img src=\"${ImageSrc.stone}\"></img></th>\r\n                                <th><img src=\"${ImageSrc.iron}\"></img></th>\r\n                                <th colspan=\"2\">Performance</th>\r\n                            </tr>\r\n                            ${hourlyBreakdowns.join('')}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        `;\r\n  }\r\n\r\n  /**\r\n   * @param {TwCheeseDate} date\r\n   * @return {string}\r\n   */\r\n  dayHint(date) {\r\n    if (date.isTodayOnServer()) {\r\n      return '';\r\n    } else if (date.isTomorrowOnServer()) {\r\n      return ' (tomorrow)';\r\n    }\r\n    return ' (' + date.toLocaleDateString('en-US', {month: 'short', day: '2-digit'}) + ')';\r\n  }\r\n\r\n  watchSelf() {\r\n    this.$toggleIcon.on('click', (e) => {\r\n      e.preventDefault();\r\n      this.toggleCollapse();\r\n    });\r\n    this.$to.on('change', (e) => this.updateSum());\r\n    this.$from.on('change', (e) => this.updateSum());\r\n  }\r\n\r\n  /**\r\n   *  change the results displayed in the summation section\r\n   */\r\n  updateSum() {\r\n    let startTime = TwCheeseDate_TwCheeseDate.newServerDate(parseInt(this.$from.val()));\r\n    let endTime = TwCheeseDate_TwCheeseDate.newServerDate(parseInt(this.$to.val()));\r\n    if (startTime > endTime) {\r\n      tmpTime = startTime;\r\n      startTime = endTime;\r\n      endTime = tmpTime;\r\n    }\r\n    let sum = Command_Command.sumPropsFromTimeframe(this.commands, startTime, endTime);\r\n\r\n    this.$sum.html(`\r\n            <img src=\"${ImageSrc.wood}\"> ${sum.haul.wood}\r\n            <img src=\"${ImageSrc.stone}\"> ${sum.haul.stone}\r\n            <img src=\"${ImageSrc.iron}\"> ${sum.haul.iron}\r\n            &nbsp;&nbsp;| ${sum.sumLoot()}/${sum.haulCapacity} (${sum.calcHaulPercent()}%)\r\n        `);\r\n  }\r\n\r\n  toggleCollapse() {\r\n    let $toggleIcon = this.$toggleIcon;\r\n\r\n    this.$content.toggle({\r\n      duration: 200,\r\n      start: function () {\r\n        let willCollapse = $toggleIcon.attr('src').includes(ImageSrc.minus);\r\n        $toggleIcon.attr('src', willCollapse ? ImageSrc.plus : ImageSrc.minus);\r\n        userConfig.set('HaulStatsWidget.collapseStats', willCollapse);\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n\r\n\r\ninitCss(`\r\n    .twcheese-pillaging-stats-summation {\r\n        background-color: #f4e4bc\r\n    }\r\n\r\n    .twcheese-pillaging-stats-hourly-breakdown tr:nth-child(even) td {\r\n        background: #FFE0A2;\r\n    }\r\n`);\r\n\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Models/ProgressMonitor.js\nclass ProgressMonitor {\r\n  constructor() {\r\n    this.progress = 0;\r\n    this.goal = 0;\r\n    this.progressHandlers = [];\r\n  }\r\n\r\n  goalDetermined(size) {\r\n    this.goal = size;\r\n    this.notifyChange();\r\n  }\r\n\r\n  progressMade(size) {\r\n    this.progress += size;\r\n    this.notifyChange();\r\n  }\r\n\r\n  notifyChange() {\r\n    for (let handler of this.progressHandlers) {\r\n      handler({progress: this.progress, goal: this.goal});\r\n    }\r\n  }\r\n\r\n  onChange(handler) {\r\n    this.progressHandlers.push(handler);\r\n  }\r\n}\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Prompt/promptLoadHauls.js\n\r\n\r\n\r\n\r\n\r\n/**\r\n * A prompt with a progress bar.\r\n * It only asks confirmation and shows progress.\r\n *\r\n * Its the responsibility of the onConfirm callback to do any loading.\r\n *\r\n * @param {function} onConfirm - async function, will be passsed one param: a ProgressMonitor\r\n */\r\nfunction promptLoadHauls(onConfirm) {\r\n  $('body').append(popupHtml);\r\n  fadeGameContent();\r\n\r\n  let $progressBarFiller = $('#twcheese_hauls_loading_bar').find('.filler');\r\n  let $progressText = $('#twcheese_hauls_loading_text');\r\n  let updateProgress = function (progress, goal) {\r\n    let percent = 100 * progress / goal;\r\n    $progressBarFiller.css({width: `${percent}%`});\r\n    $progressText.html(`${progress}/${goal}`);\r\n  }\r\n  let progressMonitor = new ProgressMonitor();\r\n  progressMonitor.onChange((e) => updateProgress(e.progress, e.goal));\r\n\r\n  $('#twcheese_hauls_prompt_confirm').on('click', async function (e) {\r\n    e.preventDefault();\r\n    document.getElementById('twcheese_servant_text').innerHTML = '<br/>May the cheese be with you.';\r\n    $('#twcheese_servant_info_prompt').hide();\r\n    $('#twcheese_servant_info_loading').show();\r\n\r\n    await onConfirm(progressMonitor);\r\n\r\n    $('#twcheese_showHaulsPrompt').remove();\r\n    unfadeGameContent();\r\n  });\r\n\r\n  $('#twcheese_hauls_prompt_cancel').on('click', function (e) {\r\n    e.preventDefault();\r\n    $('#twcheese_showHaulsPrompt').remove();\r\n    unfadeGameContent();\r\n  });\r\n}\r\n\r\n\r\nlet popupHtml = `\r\n    <div id=\"twcheese_showHaulsPrompt\" class=\"twcheese-popup\" style=\"width: 500px;\">\r\n        <div style=\"height: 100%; width: 100%; background: url('${ImageSrc.popupBackground}')\">\r\n            <div style=\"background: no-repeat url('${ImageSrc.servant}');\">\r\n                <div id=\"twcheese_servant_text\">\r\n                    <p style=\"font-size: 16px;\">My liege,</p>\r\n                    <p>Dost thou wish hauls to be included on thine screen?</p>\r\n                </div>\r\n                <div class=\"quest-goal\">\r\n                    <table width=\"100%\">\r\n                        <tbody>\r\n                            <tr>\r\n                                <td id=\"twcheese_servant_info_prompt\" class=\"twcheese-servant-info\">\r\n                                    <h5>Load haul information?</h5>\r\n                                    <p>This could take a while if you have a lot of commands.</p>\r\n                                    <div class=\"confirmation-buttons\">\r\n                                        <button id=\"twcheese_hauls_prompt_confirm\" class=\"btn btn-confirm-yes\">Yes</button>\r\n                                        <button id=\"twcheese_hauls_prompt_cancel\" class=\"btn btn-default\">Cancel</button>\r\n                                    </div>\r\n                                </td>\r\n                                <td id=\"twcheese_servant_info_loading\" class=\"twcheese-servant-info\" style=\"display: none;\">\r\n                                    <h5>Loading hauls</h5>\r\n                                    <div style=\"margin-top: 10px;\">\r\n                                        <span id=\"twcheese_hauls_loading_bar\">\r\n                                            <div class=\"filler\"></div>\r\n                                        </span>\r\n                                        <span id=\"twcheese_hauls_loading_text\">999/1000</span>\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n`;\r\n\r\n\r\ninitCss(`\r\n    #twcheese_servant_text {\r\n        box-sizing: border-box;\r\n        height: 100px;\r\n        margin-left: 120px;\r\n        padding-top: 10px;\r\n    }\r\n    #twcheese_hauls_loading_bar {\r\n        display: inline-block;\r\n        border: 2px solid black;\r\n        background-color: darkgrey;\r\n        width: 200px;\r\n        height: 16px;\r\n        vertical-align: middle;\r\n        margin-left: 60px;\r\n    }\r\n    #twcheese_hauls_loading_bar .filler {\r\n        display: block;\r\n        width: 0;\r\n        height: 100%;\r\n        background-color: darkorange;\r\n        -webkit-transition-duration: 300ms;\r\n        -mos-transition-duration: 300ms;\r\n        -o-transition-duration: 300ms;\r\n        transition-duration: 300ms;\r\n    }\r\n    #twcheese_hauls_loading_text {\r\n        display: inline-block;\r\n        line-height: 16px;\r\n        vertical-align: middle;\r\n        font-size: 10px;\r\n        margin: 5px;\r\n        width: 60px;\r\n        text-align: left;\r\n    }\r\n    .twcheese-servant-info {\r\n        text-align: center;\r\n        height: 80px;\r\n    }\r\n`);\r\n\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Prompt/suggestRedirect.js\n\r\n\r\n\r\n\r\nfunction suggestRedirect(options) {\r\n  let {message, screen, screenName, uriParams, skippableId} = options;\r\n  message = message || '{{Some genius forgot to write a message here}}';\r\n  screenName = screenName || '{{Screen Name goes here}}';\r\n  uriParams = uriParams || {};\r\n  if (!screen) {\r\n    throw Error('screen must be specified!');\r\n  }\r\n\r\n  if (skippableId && userConfig.get(skipKey(skippableId), false)) {\r\n    window.UI.InfoMessage(`Redirecting to <strong>${screenName}</strong>...`);\r\n    setTimeout(() => window.TribalWars.redirect(screen, uriParams), 200);\r\n    return;\r\n  }\r\n\r\n  let buttonConfirm = {\r\n    text: 'Take me there!',\r\n    callback: () => {\r\n      if (skippableId) {\r\n        let skipNextTime = $('#twcheese-suggest-redirect-skip').prop('checked');\r\n        userConfig.set(skipKey(skippableId), skipNextTime);\r\n      }\r\n      window.TribalWars.redirect(screen, uriParams);\r\n    },\r\n    confirm: true\r\n  };\r\n  let buttonCancel = {\r\n    text: 'Whatever...',\r\n    callback: () => {\r\n    }\r\n  };\r\n  window.UI.ConfirmationBox(buildContent(message, options), [buttonConfirm, buttonCancel], 'twcheese_suggest_redirect', true, true);\r\n}\r\n\r\n\r\nfunction skipKey(skippableId) {\r\n  return 'suggestRedirect.skip.' + skippableId;\r\n}\r\n\r\n\r\nfunction buildContent(message, options) {\r\n  let html = message;\r\n  if (options.skippableId) {\r\n    html += `<div class=\"twcheese-suggest-redirect-skip-container\">\r\n            <input id=\"twcheese-suggest-redirect-skip\" type=\"checkbox\">\r\n            <span>Don't ask, just take me there next time.</span>\r\n        </div>`\r\n  }\r\n  return html;\r\n}\r\n\r\n\r\ninitCss(`\r\n    .twcheese-suggest-redirect-skip-container {\r\n        margin-top: 20px;\r\n        font-size: 10px;\r\n    }\r\n\r\n    .twcheese-suggest-redirect-skip-container > * {\r\n        vertical-align: middle;\r\n    }\r\n`);\r\n\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Prompt/twAlert.js\nasync function twAlert(message = '', buttonText = 'Ok') {\r\n  return new Promise(function (resolve) {\r\n    let buttonAcknowledge = {\r\n      text: buttonText,\r\n      callback: resolve\r\n    };\r\n    window.UI.ConfirmationBox(message, [buttonAcknowledge], 'twcheese_alert', true, true);\r\n  });\r\n}\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Prompt/alertPremiumRequired.js\n\r\n\r\nasync function alertPremiumRequired() {\r\n  let message = `\r\n        This script relies on features that are only available to <a href=\"game.php?screen=premium\">premium account</a> users.\r\n        <br/>\r\n        <p style=\"font-size: 10px;\">\r\n            For $999 you could buy a monitor stand.\r\n            <br/>Or <strong>30+ years</strong> of tw premium account!\r\n        </p>`;\r\n\r\n  let buttonText = `Do I look like I'm made out of money?`;\r\n  return twAlert(message, buttonText);\r\n}\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Scrape/time.js\n\r\n\r\n// note: some worlds have milliseconds disabled\r\n\r\n/**\r\n * @param {string} text formatted the way tw does it\r\n * @param {string} market two char market code. e.g. \"en\"\r\n * @return {TwCheeseDate}\r\n */\r\nfunction parseArrival(text, market) {\r\n  switch (market) {\r\n    case 'cz':\r\n      return parseArrivalCzech(text);\r\n    case 'pt':\r\n      return parseArrivalPortuguese(text);\r\n  }\r\n  return parseArrivalEnglish(text);\r\n};\r\n\r\nfunction parseArrivalEnglish(text) {\r\n  // e.g. \"Jun 12, 2019  15:36:23:000\"\r\n  let expr = /(\\D+) (\\d+), (\\d+)  (\\d+):(\\d+):(\\d+):?(\\d+)?/;\r\n  let [, monthName, day, year, hours, minutes, seconds, millis] = text.match(expr);\r\n  let month = TwCheeseDate_TwCheeseDate.monthNumber(monthName);\r\n  return TwCheeseDate_TwCheeseDate.newServerDate(year, month, day, hours, minutes, seconds, millis || 0);\r\n}\r\n\r\nfunction parseArrivalCzech(text) {\r\n  // e.g. \"10.07.19 04:43:15:967\"\r\n  let [day, monthNumber, yearShort, hours, minutes, seconds, millis] = text.match(/\\d+/g);\r\n  let year = '20' + yearShort;\r\n  let month = monthNumber - 1;\r\n  return TwCheeseDate_TwCheeseDate.newServerDate(year, month, day, hours, minutes, seconds, millis || 0);\r\n}\r\n\r\nfunction parseArrivalPortuguese(text) {\r\n  // e.g. \"09/jul/2019 (20:03:15):895\"\r\n  let expr = /(\\d+)\\/(\\D+)\\/(\\d+) \\((\\d+):(\\d+):(\\d+)\\):?(\\d+)?/;\r\n  let [, day, monthName, year, hours, minutes, seconds, millis] = text.match(expr);\r\n  let month = TwCheeseDate_TwCheeseDate.monthNumber(monthName);\r\n  return TwCheeseDate_TwCheeseDate.newServerDate(year, month, day, hours, minutes, seconds, millis || 0);\r\n}\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Scrape/res.js\n\r\n\r\n/**\r\n * @param {HTMLElement} resourcesContainer an element containing wood/stone/iron amounts\r\n * @return {Resources}\r\n */\r\nfunction scrapeResources(resourcesContainer) {\r\n  // remove grey periods used as thousands separators\r\n  let $res = $(resourcesContainer).clone();\r\n  $res.find('.grey').remove();\r\n\r\n  let resAmount = function (resIconCssClass) {\r\n    // note: sometimes, if the res amount is 0, the game excludes it (and its icon) instead of showing 0\r\n    let icon = $res.find('span.' + resIconCssClass).get(0);\r\n    return icon ? parseInt($(icon).parent().text()) : 0;\r\n  }\r\n\r\n  return new Resources_Resources(\r\n    resAmount('wood'),\r\n    resAmount('stone'),\r\n    resAmount('iron')\r\n  );\r\n};\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Scrape/command.js\n\r\n\r\n\r\n\r\n/**\r\n *  scrapes a command page for the command info and returns it as a Command object\r\n *  @param  {HTMLDocument} gameDoc  the page generated by game.php?screen=command_info&id=x&type=own\r\n *  @return {Command}\r\n */\r\nfunction scrapeCommand(gameDoc) {\r\n  var command = new Command_Command();\r\n\r\n  var content = $(gameDoc).find('#content_value').get()[0];\r\n  let tables = content.getElementsByTagName('table');\r\n  let rowMap = mapFirstTable(tables);\r\n\r\n  command.arrival = parseArrival($(rowMap.arrival.cells[1]).text(), window.game_data.market);\r\n\r\n  if (tables.length < 3) {\r\n    return command;\r\n  }\r\n\r\n  let resCell = tables[2].rows[0].cells[1];\r\n  command.haul = scrapeResources(resCell);\r\n\r\n  var haulText = resCell.innerHTML;\r\n  if (haulText.search('\\\\|') !== -1) {\r\n    haulText = haulText.substring(haulText.search('\\\\|') + 7);\r\n    let performance = haulText.split('/');\r\n    command.haulCapacity = parseInt(performance[1]);\r\n  }\r\n\r\n  return command;\r\n};\r\n\r\n\r\nfunction mapFirstTable(tables) {\r\n  let table = tables[0];\r\n  let headerRows = 1;\r\n  let originRows = table.rows[headerRows].cells[0].rowSpan;\r\n  let destRows = table.rows[headerRows + originRows].cells[0].rowSpan;\r\n\r\n  let rowMap = {};\r\n  rowMap.originPlayer = table.rows[headerRows];\r\n  rowMap.originVillage = table.rows[headerRows + 1];\r\n  rowMap.destPlayer = table.rows[headerRows + originRows];\r\n  rowMap.destVillage = table.rows[headerRows + originRows + 1];\r\n\r\n  if (destRows > 2) {\r\n    rowMap.catapultTarget = table.rows[headerRows + originRows + 2];\r\n  }\r\n\r\n  rowMap.duration = table.rows[headerRows + originRows + destRows];\r\n  rowMap.arrival = table.rows[headerRows + originRows + destRows + 1];\r\n  rowMap.arrivalIn = table.rows[headerRows + originRows + destRows + 2];\r\n  rowMap.estimatedReturn = table.rows[headerRows + originRows + destRows + 3];\r\n\r\n  return rowMap;\r\n}\r\n\r\n\r\nfunction scrapeCommandUrlFromRow(row) {\r\n  let firstCell = row.cells[0];\r\n  let links = firstCell.getElementsByTagName('a');\r\n  if (links.length < 1) {\r\n    let err = new Error('failed to find command link');\r\n    err.extra = {rowHtml: row.outerHTML};\r\n    throw err;\r\n  }\r\n  return links[0].href;\r\n}\r\n\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Scrape/error.js\n/**\r\n * @param {HTMLDocument} gameDoc\r\n * @return {string|null}\r\n */\r\nfunction scrapeErrorMessage(gameDoc) {\r\n  let $error = $(gameDoc).find('.error_box');\r\n  return $error.length < 1 ? null : $error.text().trim();\r\n}\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/Transform/appendHaulColsToCommandsTable.js\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @param {ProgressMonitor} progressMonitor\r\n * @return {Command[]} returning commands from the table\r\n */\r\nasync function appendHaulColsToCommandsTable(progressMonitor) {\r\n  let commandsTable = document.getElementById('commands_table');\r\n  if (!commandsTable) {\r\n    return [];\r\n  }\r\n\r\n  $(commandsTable.rows[0]).append(`\r\n        <th><img src=\"${ImageSrc.wood}\" title=\"Wood\" alt=\"Timber\"></th>\r\n        <th><img src=\"${ImageSrc.stone}\" title=\"Clay\" alt=\"Clay\"></th>\r\n        <th><img src=\"${ImageSrc.iron}\" title=\"Iron\" alt=\"Iron\"></th>\r\n        <th>Performance</th>\r\n    `);\r\n\r\n  let commandCount = $(commandsTable).find('.rename-icon').length;\r\n  progressMonitor.goalDetermined(commandCount);\r\n  let returningCommands = [];\r\n\r\n  for (let row of commandsTable.rows) {\r\n    let firstCell = row.cells[0];\r\n    if (firstCell.tagName.toLowerCase() === 'th') {\r\n      // no command here! this is a header row. e.g. the \"select all\" bar\r\n      row.cells[row.cells.length - 1].colSpan += 4;\r\n      continue;\r\n    }\r\n\r\n    let commandUrl = scrapeCommandUrlFromRow(row);\r\n    let doc = await requestDocument(commandUrl);\r\n    let errorMessage = scrapeErrorMessage(doc);\r\n    if (errorMessage) {\r\n      $(row).append(`<td colspan=\"4\" style=\"background-color:#FFCCAA; font-size:13px; font-weight:bold; color:#B40000;\">${errorMessage}</td>`);\r\n      progressMonitor.progressMade(1);\r\n      continue;\r\n    }\r\n\r\n    try {\r\n      let command = scrapeCommand(doc);\r\n      let commandType = $(firstCell).find('.own_command').data('command-type');\r\n      if (commandType === 'return') {\r\n        returningCommands.push(command);\r\n      }\r\n\r\n      $(row).append(`\r\n                <td>${command.haul.wood}</td>\r\n                <td>${command.haul.stone}</td>\r\n                <td>${command.haul.iron}</td>\r\n                <td>${command.haul.sum()}/${command.haulCapacity} (${command.calcHaulPercent()}%)</td>\r\n            `);\r\n    } catch (err) {\r\n      console.error(err);\r\n      $(row).append(`<td>?</td><td>?</td><td>?</td><td>?</td>`);\r\n    }\r\n    progressMonitor.progressMade(1);\r\n  }\r\n\r\n  return returningCommands;\r\n};\r\n\r\n\r\n\n// EXTERNAL MODULE: ./src/Models/Debug/Build/ProcessFactory.js\nvar ProcessFactory = __webpack_require__(3);\n\n// EXTERNAL MODULE: ./src/Models/Debug/DebugEvents.js\nvar DebugEvents = __webpack_require__(0);\n\n// CONCATENATED MODULE: ./src/ToolDebug/OverviewHauls/Actions.js\n\r\n\r\n\r\n\r\n\r\n\r\nlet debugActions = {\r\n\r\n  trySelectCommandFromTable: {\r\n    async execute(na, ctrl) {\r\n      let $commandsTable = $('#commands_table');\r\n      let $commandRows = $commandsTable.children().children();\r\n\r\n      fadeGameContentExcept($commandsTable);\r\n      $(document).scrollTop($commandsTable.offset().top);\r\n\r\n      let mousetrap = (new Mousetrap()).spawn()\r\n        .on('mouseover', $commandRows, function () {\r\n          $(this).css({outline: '3px solid magenta'});\r\n        })\r\n        .on('mouseout', $commandRows, function () {\r\n          $(this).css({outline: 'none'})\r\n        });\r\n\r\n      let cleanup = function () {\r\n        unfadeGameContent();\r\n        mousetrap.destruct();\r\n        $commandRows.css({outline: 'none'});\r\n      };\r\n\r\n      $(ctrl).on(DebugEvents[\"a\" /* DebugEvents */].USER_REJECTED, function () {\r\n        cleanup();\r\n      });\r\n\r\n      return new Promise(function (resolve, reject) {\r\n        let handleRowSelected = function () {\r\n          cleanup();\r\n          try {\r\n            resolve(scrapeCommandUrlFromRow(this));\r\n          } catch (err) {\r\n            reject(err);\r\n          }\r\n        }\r\n        mousetrap.on('click', $commandRows, handleRowSelected);\r\n      });\r\n    }\r\n  },\r\n\r\n  tryScrapeCommandScreen: {\r\n    async execute(commandUrl) {\r\n      let commandDoc = await requestDocument(commandUrl);\r\n      return {\r\n        document: commandDoc,\r\n        command: scrapeCommand(commandDoc)\r\n      };\r\n    },\r\n    async summarizeResult(r) {\r\n      let document = r.document;\r\n      if (document instanceof window.HTMLDocument) {\r\n        document = document.documentElement.outerHTML;\r\n      }\r\n      return {\r\n        document: document,\r\n        command: r.command\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\r\n\n// CONCATENATED MODULE: ./dist/tool/cfg/debug/OverviewHauls/Default.js\nlet processCfg = { phases: [{\"type\":\"PhaseQuestion\",\"internalName\":\"Entry\",\"questions\":[{\"type\":\"QuestionFreeForm\",\"ask\":\"What's broken?\",\"placeholderText\":\"e.g. \\\"it freezes when loading hauls\\\"\",\"minResponseLength\":10}]}] };\r\n\r\n\n// CONCATENATED MODULE: ./dist/tool/cfg/debug/OverviewHauls/AtCommandsOverview.js\nlet AtCommandsOverview_processCfg = { phases: [{\"type\":\"PhaseQuestion\",\"internalName\":\"Entry\",\"questions\":[{\"type\":\"QuestionSelect\",\"ask\":\"What's broken?\",\"options\":[{\"answer\":\"Wrong values shown in commands list\",\"value\":\"wrong_values\",\"followUp\":[{\"type\":\"PhaseAttempt\",\"internalName\":\"Determine command url\",\"action\":\"trySelectCommandFromTable\",\"instructions\":\"Select a problematic row.\",\"success\":[{\"type\":\"PhaseAttempt\",\"internalName\":\"Read selected command\",\"action\":\"tryScrapeCommandScreen\",\"success\":[{\"type\":\"PhaseQuestion\",\"internalName\":\"Command scraper\",\"lookAt\":\"parentResult.document.documentElement.outerHTML\",\"questions\":[{\"type\":\"QuestionValue\",\"ask\":\"Arrival\",\"examine\":\"parentResult.command.arrival\"},{\"type\":\"QuestionValue\",\"ask\":\"Haul\",\"examine\":\"parentResult.command.haul\"},{\"type\":\"QuestionValue\",\"ask\":\"Haul capacity\",\"examine\":\"parentResult.command.haulCapacity\"}]}]}]}]},{\"answer\":\"Something else\",\"value\":\"other\"}]}]},{\"type\":\"PhaseQuestion\",\"internalName\":\"extra info\",\"questions\":[{\"type\":\"QuestionFreeForm\",\"ask\":\"Additional information\",\"placeholderText\":\"e.g. \\\"iron isn't shown\\\"\"}]}] };\r\n\r\n\n// CONCATENATED MODULE: ./src/ToolSetup/OverviewHauls.js\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nlet haulsIncluded = false;\r\n\r\nasync function enhanceScreenWithHaulInfo(progressMonitor) {\r\n  let returningCommands = await appendHaulColsToCommandsTable(progressMonitor);\r\n\r\n  (new HaulStatsWidget_HaulStatsWidget(returningCommands, scrapePageNumber()))\r\n    .insertAfter($('.modemenu:eq(1)'));\r\n\r\n  haulsIncluded = true;\r\n};\r\n\r\n\r\nfunction atCommandsOverview() {\r\n  let here = document.location.href;\r\n  return here.includes('screen=overview_villages') && here.includes('mode=commands');\r\n}\r\n\r\n\r\nfunction suggestRedirectToCommandsOverview() {\r\n  suggestRedirect({\r\n    message: `\r\n            <p style=\"font-size:14px;\">To use this, you must be at the commands overview.</p>\r\n            <p style=\"font-size:12px;\">Consider using the 'return' filter, since outgoing troops don't carry resources :)</p>`,\r\n    screen: 'overview_villages',\r\n    screenName: 'Commands Overview',\r\n    uriParams: {\r\n      mode: 'commands',\r\n      type: 'return'\r\n    },\r\n    skippableId: 'Tool:OverviewHauls'\r\n  });\r\n}\r\n\r\n\r\nfunction useTool() {\r\n  if (haulsIncluded) {\r\n    window.UI.InfoMessage('This is already active.', 3000, 'error');\r\n    return;\r\n  }\r\n  if (!window.premium) {\r\n    alertPremiumRequired();\r\n    return;\r\n  }\r\n  if (!atCommandsOverview()) {\r\n    suggestRedirectToCommandsOverview();\r\n    return;\r\n  }\r\n  if (!document.getElementById('commands_table')) {\r\n    window.UI.ErrorMessage(`It looks like you don't have any commands.`, 3000);\r\n    return;\r\n  }\r\n\r\n  promptLoadHauls(enhanceScreenWithHaulInfo);\r\n}\r\n\r\n\r\nlet processFactory = new ProcessFactory[\"a\" /* ProcessFactory */](debugActions);\r\n\r\nfunction newDebugProcess() {\r\n  let name = 'Tool: OverviewHauls';\r\n  if (atCommandsOverview()) {\r\n    return processFactory.create(name, AtCommandsOverview_processCfg, true);\r\n  }\r\n  return processFactory.create(name, processCfg, true);\r\n}\r\n\r\n\r\nwindow.TwCheese.registerTool({\r\n  id: 'OverviewHauls',\r\n  use: useTool,\r\n  getDebugProcess: newDebugProcess\r\n});\r\n\n\n/***/ })\n/******/ ]);"]}